<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>your will my hands</title>
  <icon>https://www.gravatar.com/avatar/587c2c7ccce52cc68f731e598f32b75c</icon>
  <subtitle>your will my hands</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://messnoTrace.github.io/"/>
  <updated>2019-04-05T03:44:17.199Z</updated>
  <id>https://messnoTrace.github.io/</id>
  
  <author>
    <name>ä¹±é€ƒ</name>
    <email>messnoTrace@gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Android å¤šæ¸ é“æ‰“åŒ…ä¿®æ”¹app nameï¼Œicon</title>
    <link href="https://messnoTrace.github.io/2019/04/05/Android-%E5%A4%9A%E6%B8%A0%E9%81%93%E6%89%93%E5%8C%85%E4%BF%AE%E6%94%B9app-name%EF%BC%8Cicon/"/>
    <id>https://messnoTrace.github.io/2019/04/05/Android-å¤šæ¸ é“æ‰“åŒ…ä¿®æ”¹app-nameï¼Œicon/</id>
    <published>2019-04-05T03:44:02.000Z</published>
    <updated>2019-04-05T03:44:17.199Z</updated>
    
    <content type="html"><![CDATA[<p><link href="http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css" rel="stylesheet">  </p><p><script src="http://cdn.bootcss.com/highlight.js/8.0/highlight.min.js"></script>  </p><p><script>hljs.initHighlightingOnLoad();</script><br>æè¿‡å¤šæ¸ é“æ‰“åŒ…çš„éƒ½çŸ¥é“ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ module çš„build.gradleä¸­é…ç½®ç›¸åº”çš„æ¸ é“å·å°±è¡Œ:</p><pre><code>productFlavor{          baidu {          }        xiaomi{}         wandoujia{}    }</code></pre><p>åƒè¿™æ ·ï¼Œå°±å¯ä»¥äº†ï¼Œç„¶åå°†å‹ç›Ÿçš„chanelvalueä¿®æ”¹ä¸‹å°±å¯ä»¥äº†ï¼Œéœ€è¦ä¸åŒçš„æ¸ é“ï¼Œé…ç½®ä¸åŒçš„applicationidï¼Œä¹Ÿä¸æ˜¯ä»€ä¹ˆéš¾äº‹ã€‚ä¸è¿‡ä»Šå¤©æˆ‘é‡åˆ°çš„éœ€æ±‚æ˜¯ï¼Œä¸åŒçš„æ¸ é“é…ç½®ä¸åŒçš„appnameå’Œiconã€‚ä¸€å¼€å§‹æˆ‘æƒ³ç€ç”¨ä¹‹å‰çš„å“ªç§æ–¹æ³•åº”è¯¥å¯è¡Œï¼Œç„¶åå°±è¯•äº†ä¸‹ï¼Œä¸€è¯•ä¸çŸ¥é“ï¼Œè¯•è¿‡å°±è›‹ç–¼äº†ï¼Œappnameæ˜¯å¯ä»¥æ¢æ‰ï¼Œä½†æ˜¯iconå‘¢ï¼Œï¼Œå’‹æ•´ï¼Œï¼Œï¼Œæ‰¾äº†ä¸€åœˆæ–¹æ³•ï¼Œéƒ½æœ¨æœ‰æ‰¾åˆ°ï¼Œéƒé—·ï¼Œstringç±»å‹çš„ï¼Œéƒ½å¯ä»¥é€šè¿‡å¸¸ç”¨çš„é‚£ç§æ›¿æ¢å ä½ç¬¦çš„æ–¹å¼æ¥æ”¹ï¼Œæˆ–è€…æ˜¯resValue(è¿™ä¸ªæ²¡æœ‰è¯•ï¼Œï¼Œä½†æ˜¯ä¼¼ä¹æ˜¯å¯ä»¥çš„)ã€‚ç„¶åå„ç§æœèµ„æ–™ï¼Œæœ‰ä»€ä¹ˆè®¾ç½® useOldManifestMerger false ï¼Œä¸è¿‡è‡ªå·±æ²¡è¯•æˆåŠŸï¼ˆä¸èƒ½æ€ªæˆ‘ï¼Œç†è®ºæ˜¯è¿™ä¸ªé“ç†çš„ï¼Œåªä¸è¿‡gradleç‰ˆæœ¬ä¸ä¸€æ ·ï¼ŒGoogleå‡çº§äº†ï¼Œå¯¼è‡´æˆ‘æ‡µé€¼äº†ï¼‰å¶ç„¶é—´Googleäº†ä¸€ä¸‹  how to change app icon for diffrent productFlavors in androidï¼Œç‚¹å¼€ç¬¬ä¸€ä¸ª<a href="http://stackoverflow.com/questions/22875948/how-to-provide-different-android-app-icons-for-different-gradle-buildtypes" target="_blank" rel="external">é“¾æ¥</a>,ç„¶åç­”ä¸»çš„ç­”æ¡ˆç»™äº†æˆ‘ä¸€äº›å¯å‘ï¼š</p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-3cbf6c005c8c592c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQæˆªå›¾20160811184619.png"></p><p>ç„¶åæœå•Šæœï¼Œåˆæ‰¾åˆ°äº†<a href="http://stackoverflow.com/questions/25981156/tools-replace-not-replacing-in-android-manifest" target="_blank" rel="external">è¿™ä¸ª</a></p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-0c8656280ca0a302.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQæˆªå›¾20160811185123.png"></p><p>ç„¶åç»è¿‡è‡ªå·±çš„æ‘¸ç´¢ï¼Œæäº†å‡ºæ¥äº†ï¼Œç®€å•æ¥è¯´ï¼š<br>å¤§å®¶çœ‹ç¬¬ä¸€å¼ å›¾ä½ çš„ç›®å½•ç»“æ„å°±ä¼šå‘ç°ï¼Œå¦‚æœæˆ‘ä»¬åœ¨src/main/æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä»¥æˆ‘ä»¬å»æ¸ é“åä¸ºåçš„ï¼Œç›®å½•ç»“æ„å’Œmainä¸€æ ·çš„æ–‡ä»¶ç›®å½•ï¼Œå½“æˆ‘ä»¬æ‰“åŒ…çš„æ—¶å€™å°±ä¼šè¯»å–è¿™é‡Œé¢çš„èµ„æºæ–‡ä»¶ï¼Œæ‰€ä»¥å‘¢ï¼Œæˆ‘å°±æ–°å»ºäº†ä¸ªæ¸…å•æ–‡ä»¶ï¼Œå°†å¤´éƒ¨æ¢æˆå›¾äºŒæ‰€ç¤ºï¼Œåœ¨æ ¹ç›®å½•æ·»åŠ </p><pre><code>xmlns:tools=&quot;http://schemas.android.com/tools&quot;</code></pre><p>ç„¶åapplication</p><pre><code>tools:replace=&quot;android:icon&quot; android:icon=&quot;@drawable/icon_all&quot;</code></pre><p>æ›¿æ¢ä½ éœ€è¦æ¢çš„iconå°±è¡Œï¼Œokï¼Œè‡³æ­¤æå®šï¼Œè‡³äºä¸ºä»€ä¹ˆè¿™ä¹ˆæï¼Œæˆ‘çœ‹åˆ°äº†å®˜æ–¹çš„ä¸€ç¯‡æ–‡ç« <a href="http://tools.android.com/tech-docs/new-build-system/user-guide/manifest-merger#TOC-Manifest-files-ordering" target="_blank" rel="external">æ¸…å•åˆå¹¶</a>,å¦å¤–è¿˜æœ‰ç¯‡å›½å†…<a href="http://blog.csdn.net/maosidiaoxian/article/details/42671999" target="_blank" rel="external">è¯‘æ–‡</a></p><p>å‰©ä¸‹çš„å°±é å°ä¼™ä¼´ä¹ˆè‡ªå·±æ‘¸ç´¢äº†ã€‚ã€‚ã€‚ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;link href=&quot;http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css&quot; rel=&quot;stylesheet&quot;&gt;  &lt;/p&gt;
&lt;p&gt;&lt;script src=&quot;http://cdn.bo
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>AndroidStudioä¸­è°ƒç”¨.soåŒ…å‡ºç°æ‰¾ä¸åˆ°.soåŒ…çš„é”™è¯¯</title>
    <link href="https://messnoTrace.github.io/2019/04/05/AndroidStudio%E4%B8%AD%E8%B0%83%E7%94%A8-so%E5%8C%85%E5%87%BA%E7%8E%B0%E6%89%BE%E4%B8%8D%E5%88%B0-so%E5%8C%85%E7%9A%84%E9%94%99%E8%AF%AF/"/>
    <id>https://messnoTrace.github.io/2019/04/05/AndroidStudioä¸­è°ƒç”¨-soåŒ…å‡ºç°æ‰¾ä¸åˆ°-soåŒ…çš„é”™è¯¯/</id>
    <published>2019-04-05T03:40:45.000Z</published>
    <updated>2019-04-05T03:42:05.763Z</updated>
    
    <content type="html"><![CDATA[<p><link href="http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css" rel="stylesheet">  </p><script src="http://cdn.bootcss.com/highlight.js/8.0/highlight.min.js"></script>  <script>hljs.initHighlightingOnLoad();</script>  <p><img src="http://upload-images.jianshu.io/upload_images/1453857-0fb31dfbb366a918.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQæˆªå›¾20160721125018.png"></p><p>###å‡ºç°åŸå› <br>RT,åœ¨Andoridsutdioä¸­è°ƒç”¨.soåº“å‡ºç°å¦‚ç°æ ‡é¢˜æ‰€ç¤ºé”™è¯¯ï¼Œè¯¥æ€ä¹ˆè§£å†³ã€‚é¦–å…ˆå‡ºç°è¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯å› ä¸ºä½ çš„cpuæ¶æ„æ˜¯64ä½çš„ã€‚è€Œä½ çš„.soåº“åœ¨ç¼–è¯‘çš„æ—¶å€™æ²¡æœ‰æ”¯æŒ64ä½cpuã€‚<strong>  å¦‚æœè¿™ä¸ª.soçš„åº“æ˜¯ä½ è‡ªå·±å¼„çš„ï¼Œé‚£ä½ é‡æ–°ç”Ÿæˆä¸‹æ”¯æŒ64ä½cpuçš„.soåº“å‡ºæ¥å°±è¡Œäº†ï¼Œå‰©ä¸‹çš„æ–‡å­—å°±ä¸ç”¨çœ‹äº†ï¼Œæœ¬æ–‡é€‚ç”¨äºä½ æ²¡æ³•å¯¹.soåšæ“ä½œçš„æœ‹å‹ã€‚</strong> æŸ¥çœ‹cpuæ¶æ„ï¼Œå¯ä»¥é€šè¿‡adb shell å‘½ä»¤ã€‚è¿›å…¥/system/ç›®å½•ä¸‹æœ‰ä¸€ä¸ªbuild.propæ–‡ä»¶ï¼Œè¿™ä¸ªé‡Œé¢æœ‰ä¸€è¡Œ ro.product.cpu.abi=xxå°±æ˜¯ä½ æ‰€è¦çš„ä¿¡æ¯ï¼Œå…·ä½“å‘½ä»¤å¦‚ä¸‹:</p><pre><code>adb shellcd /systemcat build.prop</code></pre><p>apkåŒ…åœ¨å®‰è£…çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šæŠŠåŒ…ä¸­ä¸è‡ªå·±çš„abiå¯¹åº”çš„libç›®å½•ä¸­çš„soåº“æ–‡ä»¶æ‹·è´åˆ°systemåˆ†åŒºä¸­ï¼Œ32ä½æœºå™¨ä¸­åªæœ‰ä¸€ä¸ªç›®å½•/system/libï¼Œ64ä½æœºå™¨ä¸­æœ‰ä¸¤ä¸ªç›®å½•/system/libå’Œ/system/lib64ï¼Œappå¯åŠ¨è¿›è¡Œé“¾æ¥æ—¶ï¼Œ64ä½æœºå™¨ä¸­ä¼šå…ˆåˆ°/system/lib64ç›®å½•ä¸­å»æ‰¾ï¼Œè¿™æ—¶å€™è‚¯å®šæ‰¾ä¸åˆ°ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°å†åˆ°/system/libç›®å½•ä¸­å»æ‰¾ã€‚å¦‚æœä½ æŠŠ32ä½çš„soåº“æ‹·è´åˆ°äº†lib64ç›®å½•ä¸­ï¼Œä¼šå¯¼è‡´é“¾æ¥å¤±è´¥ï¼ŒåŒæ ·ï¼Œ64ä½çš„soåº“è¢«æ‹·è´åˆ°libç›®å½•ä¸­ä¹Ÿä¼šå¯¼è‡´å¤±è´¥ï¼Œæ‰€ä»¥soåº“è¦å’Œç›®å½•ä¸€ä¸€å¯¹åº”ã€‚</p><p>###è§£å†³æ–¹æ¡ˆ<br>é¦–å…ˆæˆ‘çš„ç›®å½•ç»“æ„æ˜¯è¿™æ ·çš„ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/1453857-be5473a00f8f04a3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQæˆªå›¾20160721123538.png"><br>æˆ‘çš„.soå¹¶æ²¡æœ‰æ”¾åœ¨æ–°å»ºçš„jniLibsç›®å½•ä¸­ï¼Œè¿™ä¸ªå…³ç³»åº”è¯¥ä¸å¤§ï¼Œä¸¤ç§æ–¹å¼éƒ½å¯ä»¥ã€‚<br>æˆ‘çš„cpuæ¶æ„æ˜¯ ro.product.cpu.abi=arm64-v8a<br>è€Œæˆ‘çš„åªæœ‰ä¸€ä¸ªCPUæ¶æ„å°±æ˜¯armebi-v7a,æˆ‘ä»¬è¦åšçš„å°±æ˜¯é˜»æ­¢ç”Ÿæˆarm64-v8a;<br>æ­£å¸¸æƒ…å†µæ‰“å¼€apkçš„libç»“æ„å¦‚ä¸‹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/1453857-5e5183dd73f1ac09.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQæˆªå›¾20160721124748.png"></p><p>æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p><ul><li>é¦–å…ˆåœ¨projectç›®å½•ä¸‹çš„ gradle.propertiesä¸­æ·»åŠ ä¸€å¥ <pre><code>android.useDeprecatedNdk=true</code></pre></li><li>åœ¨appçš„build.gradleä¸­çš„defaulConfigä¸‹æ·»åŠ å¦‚ä¸‹ï¼š<pre><code>ndk {    abiFilters &quot;armeabi&quot;, &quot;armeabi-v7a&quot;, &quot;x86&quot;, &quot;mips&quot;}</code></pre></li></ul><p>è¿™æ—¶å€™ä½ è§£å‹å¼€ç”Ÿæˆçš„apkåŒ…ï¼Œä¼šå‘ç°ç›®å½•libç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-df30fc0704288587.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQæˆªå›¾20160721124539.png"></p><p>OKï¼Œè¿™æ ·å°±è§£å†³äº†æˆ‘çš„è¿™ä¸ªé—®é¢˜ï¼Œç½‘ç»œä¸Šæœ‰ä¸€äº›åˆ«çš„é˜»æ­¢ç”Ÿæˆarm64-v8aï¼Œä½†æ˜¯ä¸å¥½ä½¿ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;link href=&quot;http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css&quot; rel=&quot;stylesheet&quot;&gt;  &lt;/p&gt;
&lt;script src=&quot;http://cdn.bootc
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Androidé€šè¿‡åå°„å®ç°é™é»˜å®‰è£…</title>
    <link href="https://messnoTrace.github.io/2019/04/05/Android%E9%80%9A%E8%BF%87%E5%8F%8D%E5%B0%84%E5%AE%9E%E7%8E%B0%E9%9D%99%E9%BB%98%E5%AE%89%E8%A3%85/"/>
    <id>https://messnoTrace.github.io/2019/04/05/Androidé€šè¿‡åå°„å®ç°é™é»˜å®‰è£…/</id>
    <published>2019-04-05T03:38:23.000Z</published>
    <updated>2019-04-05T03:39:02.253Z</updated>
    
    <content type="html"><![CDATA[<p><link href="http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css" rel="stylesheet">  </p><script src="http://cdn.bootcss.com/highlight.js/8.0/highlight.min.js"></script>  <script>hljs.initHighlightingOnLoad();</script>  <p>æœ¬æ–‡è®²è§£é€šè¿‡åå°„Android pm  instalæ¥è°ƒç”¨éšè—apiï¼Œ æ¥é™é»˜å®‰è£…ï¼Œè‡³äºåŸç†ä»€ä¹ˆçš„ï¼Œå°±ä¸å¤šè¯´äº†ï¼Œç½‘ç»œä¸Šä¸€æœä¸€å¤§æŠŠï¼Œä¸‹é¢æ˜¯äº²æµ‹å¯è¡Œçš„ï¼›<br>å…ˆä¸Š<a href="https://github.com/messnoTrace/SlienceInstall" target="_blank" rel="external">Demo</a>,å…¶ä¸­çš„libsæ–‡ä»¶å¤¹ä¸‹çš„class.jaræ˜¯ä¸»è§’ã€‚<br>æœ¬æ–‡æœ‰ä¸€ä¸ªå¤§å‰æï¼Œé‚£å°±æ˜¯ä½ çš„apkæ˜¯æ”¾åœ¨ç³»ç»Ÿ/system/priv-appç›®å½•ä¸‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œromæ˜¯ä½ ä»¬è‡ªå·±æçš„ï¼Œæ‰‹åŠ¨æ»‘ç¨½=ã€‚=<br>å¦‚æœä½ æ˜¯ç”¨AndroidStudioç‰ˆæœ¬çš„ï¼Œä¹Ÿæ˜¯é“¾æ¥ä¸­çš„<a href="https://github.com/messnoTrace/SlienceInstall/tree/master/DemoSilenceInstall" target="_blank" rel="external">DemoSilenceInstall</a><br>æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>å»ºä¸€ä¸ªä½ è‡ªå·±çš„å·¥ç¨‹ ï¼Œå°†class.jaræ”¾å…¥åˆ°libsç›®å½•ä¸‹ã€‚</li><li>ç„¶åprojectStructure(æŒ‰F4ç›´æ¥è¿›)ï¼Œè¿›å…¥dependenceç‚¹å‡»+å·ï¼Œé€‰æ‹©FileDependence è®°å¾—æŠŠ scopeç½®ä¸ºProvidedï¼Œå¦‚ä¸‹å›¾:<br><img src="http://upload-images.jianshu.io/upload_images/1453857-d74f2be33a1b022c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1.png"></li></ul><ul><li><p>å·¥ç¨‹ç›®å½•ä¸‹çš„gradleæ–‡ä»¶ä¿®æ”¹ï¼š</p><pre><code>allprojects {    repositories {                  jcenter()            }              gradle.projectsEvaluated {                                  tasks.withType(JavaCompile) {                                        options.compilerArgs.add(&apos;-Xbootclasspath/p:app\\libs\\class.jar&apos;)                                    }                   }            }</code></pre><p>   <strong>çœ‹å¥½åå­—,ä¸è¦çœ¼çï¼Œåé¢æ˜¯ä½ èµ·çš„jaråŒ…çš„åå­—ï¼Œè¿™ä¸ªåå­—éšæ„å–ï¼Œä¸¤è€…å¯¹åº”å°±è¡Œï¼Œ</strong></p><p>  ä»¥ä¸Šçš„æ“ä½œçš„ç›®çš„æœ‰ä¸¤ä¸ªï¼š</p><pre><code>1.å°±æ˜¯å°†class.jarä»¥eclipseä¸­é‚£ç§userlibçš„å½¢å¼å¯¼å…¥ï¼Œ2.è°ƒæ•´jaråŒ…çš„ä¼˜å…ˆçº§</code></pre></li><li>å†å°†demoä¸­install åŒ…ä¸‹çš„ä»£ç æ”¾åˆ°ä½ çš„å·¥ç¨‹ä¸­.å¦‚æœè¿™ä¸ªæ—¶å€™ä½ çš„PM.javaè¿™ä¸ªæ–‡ä»¶ä¸æŠ¥é”™ï¼Œé‚£ä¹ˆæ­å–œï¼Œä½ çš„æ“ä½œå°±ç®—å®Œæˆäº†</li><li>è¿™ä¸ªæ­¥éª¤æˆ‘çš„ä»£ç å‡ºç°äº†é—®é¢˜ï¼Œä¸çŸ¥é“ä½ çš„ä¼šä¸ä¼šï¼Œå°±æ˜¯Androidä¸­65535é—®é¢˜äº†ï¼Œä¹Ÿå°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜åšçš„æ“ä½œï¼ŒASä¸‹å¥½è§£å†³ï¼Œè¿™ä¸ªä¸åšè¿‡å¤šè§£é‡Šã€‚</li></ul><p>å‰©ä¸‹çš„ï¼Œå°±æ˜¯å°†åº”ç”¨æ‰“åŒ…ç­¾åï¼Œæ”¾åˆ°/system/priv-appè¿™ä¸ªç›®å½•ä¸‹ å°±okäº†ï¼Œ</p><p>ä¸‹é¢è¯´ä¸‹Eclipseç‰ˆæœ¬çš„æ“ä½œï¼Œä»£ç éƒ½æ˜¯ä¸€æ ·çš„ï¼ŒjaråŒ…ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå°±ä¸¤ç‚¹ï¼ŒjaråŒ…é€šè¿‡userlibraryçš„å½¢å¼å¯¼å…¥ï¼Œç›´æ¥æ”¾å›¾å§ï¼Œå¤šå›¾æ…å…¥ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/1453857-e9e8d436fbd4ddde.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="![Uploading 4_049957.png . . .]"></p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-d5b134f0db69b9a8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="3.png"></p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-cecd54290fd90360.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="4.png"></p><p>![</p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-e6cde6675deb959b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Uploading 6_086779.png . . .]"></p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-16490fdfd7ab0de6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="6.png"></p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-73ac54c47095b33b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="7.png"></p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-c524e6d1cb374503.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="8.png"></p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-c57017127dc439c4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="9.png"></p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-d0b9e66477c90d60.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="![Uploading 10_162291.png . . .]"></p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-8fd7af66b59e3784.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="11.png"></p><p>è‡³æ­¤ï¼Œï¼Œæå®šäº†ï¼Œâ•®(â•¯â–½â•°)â•­ï¼Œç»§ç»­æ¬ç –ã€‚å¦‚æœä½ è¦é—®è¿™ä¸ªclassæ€ä¹ˆæ¥çš„ï¼Œä½ æ‰¾åšromçš„å¤§ç¥ä»¬ç»™ä½ ç¼–è¯‘ä¸€ä»½æºç å°±è¡Œï¼Œåæ­£æˆ‘ä¸ä¼šã€‚OTZâ€¦. ç„¶è€Œè¿™ä¸ªåœ°æ–¹åœ¨æˆ‘å†™å®Œæ–‡ç« ååˆå‡ºç°äº†ä¸€ä¸ªå®æˆ˜é—®é¢˜ï¼Œé‚£å°±æ˜¯ç”¨multydexåˆ†åŒ…å¤„ç†åï¼Œè¿˜æ˜¯ä¼šå‡ºç° <a href="http://stackoverflow.com/questions/32721083/too-many-classes-in-main-dex-list-main-dex-capacity-exceeded" target="_blank" rel="external">Too many classes in â€“main-dex-list, main dex capacity exceeded</a>ï¼Œï¼Œç›®å‰ä¸€ä¸ªæœ€ç®€å•æš´åŠ›çš„æ–¹æ³•å°±æ˜¯æŠŠminsdkversion è°ƒæˆ21+ï¼Œæˆ‘åœ¨æƒ³æƒ³åŠæ³•ï¼Œï¼Œï¼Œï¼Œè§£å†³äº†æ›´æ–°æ–‡ç« ã€‚</p><p>(âŠ™oâŠ™)â€¦ï¼Œæš‚æ—¶æ²¡è§£å†³ï¼Œä¸è¿‡ä¸Šäº†ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œç”¨aidlå®ç°çš„ï¼Œä¹Ÿæ˜¯å¯ä»¥ç”¨<a href="https://github.com/messnoTrace/SlienceInstall/tree/master/MyApplication" target="_blank" rel="external">è¿™é‡Œçš„</a>â€¦ä¸œè¥¿éƒ½å·®ä¸å¤šï¼ŒjaråŒ…æ¢äº†ä¸ªç²¾ç®€çš„ï¼Œç„¶åæ”¹ç”¨aidlå®ç°çš„æ³¨æ„ï¼Œaidlçš„åŒ…åä¸è¦åŠ¨ï¼Œï¼Œï¼Œç„¶åé…ç½®ä¸‹gradleé‡Œé¢çš„aidl</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;link href=&quot;http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css&quot; rel=&quot;stylesheet&quot;&gt;  &lt;/p&gt;
&lt;script src=&quot;http://cdn.bootc
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Androidä¿®æ”¹CheckBoxPreference ä¸­title ï¼Œsummaryå­—ä½“çš„é¢œè‰²</title>
    <link href="https://messnoTrace.github.io/2019/04/05/Android%E4%BF%AE%E6%94%B9CheckBoxPreference-%E4%B8%ADtitle-%EF%BC%8Csummary%E5%AD%97%E4%BD%93%E7%9A%84%E9%A2%9C%E8%89%B2/"/>
    <id>https://messnoTrace.github.io/2019/04/05/Androidä¿®æ”¹CheckBoxPreference-ä¸­title-ï¼Œsummaryå­—ä½“çš„é¢œè‰²/</id>
    <published>2019-04-05T03:36:23.000Z</published>
    <updated>2019-04-05T03:36:57.633Z</updated>
    
    <content type="html"><![CDATA[<p><link href="http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css" rel="stylesheet">  </p><script src="http://cdn.bootcss.com/highlight.js/8.0/highlight.min.js"></script>  <script>hljs.initHighlightingOnLoad();</script>  <p>ä»¥å‰æ²¡æ€ä¹ˆå…³æ³¨è¿‡PreferenceActivityçš„ä¸€äº›ç”¨æ³•åªæ˜¯ç®€å•äº†è§£ä¸‹ï¼Œç„¶ååˆšå¥½ä»Šå¤©é‡åˆ°äº†æŸä¸ªæœºå‹ä¸Šå‡ºç°äº†é—®é¢˜ï¼š<strong>æˆ‘æ˜æ˜è®¾ç½®çš„æ˜¯é»‘è‰²çš„å­—ä½“ï¼Œåœ¨è¿™ä¸ªæœºå™¨ä¸Šå´æ˜¯ç™½è‰²çš„</strong>ï¼Œç„¶åå„ç§æ‘¸ç´¢å¾—å‡ºäº†ä¸ªæ¨è®ºï¼Œé¡µé¢çš„å­—ä½“é¢œè‰²ä»€ä¹ˆçš„ï¼Œå¯èƒ½æ˜¯æ›´éšç³»ç»Ÿæ¥çš„ï¼Œå—ç³»ç»Ÿè°ƒæ§ï¼š<br>æˆ‘æ˜¯è¿™ä¹ˆå†™çš„ï¼Œ</p><pre><code>  &lt;CheckBoxPreference      android:defaultValue=&quot;true&quot;    android:key=&quot;weather_use_metric&quot;  android:textColor=&quot;@color/black&quot;  android:title=&quot;@string/weather_use_metric&quot; /&gt;</code></pre><p>é—®é¢˜å‡ºç° äº†é‚£æ²¡åŠæ³•ï¼Œåªèƒ½æƒ³åŠæ³•æ”¹äº†ï¼Œå¥½åœ¨ç°åœ¨å­¦ä¼šäº†é¢å‘googleç¼–ç¨‹ï¼Œç„¶åæœçš„ä¸€ä¸‹ï¼Œæ‰¾åˆ°äº†ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå…ˆä¸Šæ€ä¹ˆè§£å†³ï¼Œç„¶åå†è¯´ä¸ºä»€ä¹ˆè¿™ä¹ˆå¹²ã€‚é¦–å…ˆå»ºä¸ªlayout ï¼Œåå­—éšä¾¿å–ï¼ˆæˆ‘å–åcustom_preferece_layout.xmlï¼‰ï¼Œå†…å®¹å¦‚ä¸‹:</p><pre><code>          &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;              android:layout_width=&quot;match_parent&quot;           android:layout_height=&quot;wrap_content&quot;              android:minHeight=&quot;?android:attr/listPreferredItemHeight&quot;            android:gravity=&quot;center_vertical&quot;            android:paddingRight=&quot;?android:attr/scrollbarSize&quot;&gt;          &lt;RelativeLayout android:layout_width=&quot;wrap_content&quot;                  android:layout_height=&quot;wrap_content&quot; android:layout_marginLeft=&quot;15dip&quot;            android:layout_marginRight=&quot;6dip&quot;         android:layout_marginTop=&quot;6dip&quot;               android:layout_marginBottom=&quot;6dip&quot;          android:layout_weight=&quot;1&quot;&gt;             &lt;TextView android:id=&quot;@+android:id/title&quot;                  android:layout_width=&quot;wrap_content&quot;          android:layout_height=&quot;wrap_content&quot;                  android:singleLine=&quot;true&quot;           android:textAppearance=&quot;?android:attr/textAppearanceLarge&quot;                  android:ellipsize=&quot;marquee&quot; android:fadingEdge=&quot;horizontal&quot;                  android:textColor=&quot;@color/black&quot; /&gt;            &lt;TextView android:id=&quot;@+android:id/summary&quot;              android:layout_width=&quot;wrap_content&quot;         android:layout_height=&quot;wrap_content&quot;                  android:layout_below=&quot;@android:id/title&quot;         android:layout_alignLeft=&quot;@android:id/title&quot;                  android:textAppearance=&quot;?android:attr/textAppearanceSmall&quot;               android:maxLines=&quot;4&quot; /&gt;      &lt;/RelativeLayout&gt;    &lt;!-- Preference should place its actual preference widget here. --&gt;      &lt;LinearLayout android:id=&quot;@+android:id/widget_frame&quot;            android:layout_width=&quot;wrap_content&quot;       android:layout_height=&quot;match_parent&quot;              android:gravity=&quot;center_vertical&quot; android:orientation=&quot;vertical&quot; /&gt;  &lt;/LinearLayout&gt;</code></pre><p>åœ¨è¿™ä¸ªå¸ƒå±€ä¸­ä¿®æ”¹titleï¼Œsunmmaryçš„é¢œè‰²å°±å¯ä»¥äº†ã€‚<br>ç„¶åå†CheckBoxPreference    ä¸­åŠ ä¸€å¥ï¼š</p><pre><code>&lt;CheckBoxPreference    android:defaultValue=&quot;true&quot;      android:key=&quot;weather_use_metric&quot;    android:layout=&quot;@layout/custom_preferece_layout&quot;   android:textColor=&quot;@color/black&quot;        /&gt;</code></pre><p>ç„¶åï¼Œå°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œé‚£ä¸ºä»€ä¹ˆè¿™ä¹ˆæå‘¢ï¼Ÿè¿›å…¥CheckBoxPreference   é¡¶å±‚çˆ¶ç±»Preferenceä¸­çœ‹ï¼Œçœ‹åˆ°æ„é€ ä¸­çš„æ³¨é‡Šäº†ï¼š</p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-fca483c577435efc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQæˆªå›¾20161110175559.png"></p><p>è¿™ç©æ„é»˜è®¤çš„æ§åˆ¶äº†æ ·å¼ï¼Œç„¶åå†å¾€ä¸‹çœ‹åˆ°ä¸€ä¸ªæ–¹æ³•ï¼š</p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-54f7fd8444a953dc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQæˆªå›¾20161110175911.png"></p><p>ä»–è¯´å¤§éƒ¨åˆ†æƒ…å†µè¶³å¤Ÿç”¨äº†ï¼Œä½†æ˜¯è¿™ä¸æ˜¯å‡ºæ¥é—®é¢˜ä¹ˆï¼Œäºæ˜¯åˆ°androidçš„valuesä¸­çš„atträ¸‹æ‰¾ï¼Œ</p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-e5a69f67b3b10c3d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p><p>å—¯å¾ˆè´´å¿ƒï¼Œè¡Œæ•°éƒ½æˆªå‡ºæ¥äº†ã€‚é¡¶å±‚é»˜è®¤å®ç°äº†ä¸ªå¸ƒå±€ï¼Œåœ¨CheckBoxPreferenceçš„onBindViewæ–¹æ³•ä¸­å‡ºç°äº†ä¸ªidå’Œä¸€ä¸ªæ–¹æ³•ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/1453857-30381fbc2e2d3ff8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQæˆªå›¾20161110181103.png"></p><p>idç‚¹è¿›å»èƒ½æ‰¾åˆ°ä¸ªå¸ƒå±€ï¼Œç„¶åå†çˆ¶ç±»TwoStatePreferenceä¸­å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–¹æ³•é‡Œé¢å†™äº†ä»€ä¹ˆï¼Œæ³¨æ„çœ‹ä¸Šé¢çš„å¸ƒå±€æ§ä»¶çš„idï¼Œä½ æ²¡çœ‹é”™ï¼Œå°±æ˜¯è¦†ç›–äº†preference_material.xml ä¸­çš„å¸ƒå±€ï¼š</p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-c2fb7896c6189aba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQæˆªå›¾20161110181315.png"></p><p>é™„ä¸Šç­”æ¡ˆé“¾æ¥ <a href="http://stackoverflow.com/questions/4469514/how-to-customize-text-color-of-the-checkboxpreference-title" target="_blank" rel="external">http://stackoverflow.com/questions/4469514/how-to-customize-text-color-of-the-checkboxpreference-title</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;link href=&quot;http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css&quot; rel=&quot;stylesheet&quot;&gt;  &lt;/p&gt;
&lt;script src=&quot;http://cdn.bootc
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Android Accessbilityçš„ç®€å•ç”¨æ³•</title>
    <link href="https://messnoTrace.github.io/2019/04/05/Android-Accessbility%E7%9A%84%E7%AE%80%E5%8D%95%E7%94%A8%E6%B3%95/"/>
    <id>https://messnoTrace.github.io/2019/04/05/Android-Accessbilityçš„ç®€å•ç”¨æ³•/</id>
    <published>2019-04-05T03:33:38.000Z</published>
    <updated>2019-04-05T03:33:55.431Z</updated>
    
    <content type="html"><![CDATA[<p><link href="http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css" rel="stylesheet">  </p><p><script src="http://cdn.bootcss.com/highlight.js/8.0/highlight.min.js"></script>  </p><p><script>hljs.initHighlightingOnLoad();</script><br>Accessbility åˆå«åšè¾…åŠ©åŠŸèƒ½ï¼Œæ˜¯Androidå®˜æ–¹æ¨å‡ºå¸®åŠ©èº«ä½“ä¸ä¾¿æˆ–è€…æ“ä½œä¸çµæ´»çš„äººæ¥è¾…åŠ©æ“ä½œçš„ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å¹²ä¸€äº›åˆ«çš„äº‹ï¼Œæ¯”å¦‚è‡ªåŠ¨æŠ¢çº¢åŒ…å•Šï¼Œé™é»˜å®‰è£…ç‚¹å‡»å•Šç­‰å·²çŸ¥æˆ–è€…æœªçŸ¥çš„åº”ç”¨ã€‚å‡ºäºæŸç§éœ€æ±‚ï¼Œå°±ç ”ç©¶äº†ä¸‹è¿™ä¸ªåŠŸèƒ½çš„ç®€å•ç”¨æ³•ï¼Œå…ˆåšä¸€ä¸ªæ¨¡æ‹ŸæŒ‰é’®ç‚¹å‡»çš„æ•ˆæœã€‚<br>  å¸ƒå±€å¾ˆç®€å•ï¼Œå°±ä¸è´´ä»£ç äº†ï¼Œç®€å•æè¿°ä¸‹ï¼Œä¸»ç•Œé¢å°±ä¸€ä¸ªæŒ‰é’®ï¼Œidéšä¾¿ä½ å–ï¼Œåœ¨Activityä¸­è®¾ç½®ç‚¹å‡»äº‹ä»¶ï¼Œå¼¹å‡ºä¸€ä¸ªToastã€‚</p><p>#####æ­¥éª¤</p><ol><li><p>åˆ›å»ºCheckAccessbilityServicesï¼š<br>CheckAccessbilityServices ç»§æ‰¿è‡ªAccessibilityServiceï¼Œå¹¶åœ¨æ¸…å•æ–‡ä»¶applcationèŠ‚ç‚¹ä¸­é…ç½®ï¼Œå¹¶åŠ å…¥æƒé™</p><pre><code>&lt;service    android:name=&quot;.CheckAccessbilityServices&quot;    android:enabled=&quot;true&quot;        android:exported=&quot;true&quot;android:label=&quot;æµ‹è¯•ç‚¹å‡»&quot;android:permission=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;&gt;      &lt;intent-filter&gt;            &lt;action android:name=&quot;android.accessibilityservice.AccessibilityService&quot; /&gt;      &lt;/intent-filter&gt;    &lt;meta-data         android:name=&quot;android.accessibilityservice&quot;         android:resource=&quot;@xml/check_accessibility_config&quot; /&gt;&lt;/service&gt;&apos;</code></pre><p>2.åœ¨resç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹xmlï¼Œå¹¶åˆ›å»ºæ­¥éª¤ä¸€ä¸­check_accessibility_config.xml</p><pre><code>&lt;accessibility-service xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;                   android:description=&quot;@string/check_click&quot;     android:packageNames=&quot;com.notrace&quot;      android:accessibilityEventTypes=    &quot;typeAllMask|typeViewClicked|typeViewFocused|typeNotificationStateChanged|typeWindowStateChanged&quot;      android:accessibilityFlags=&quot;flagDefault&quot;     android:accessibilityFeedbackType=&quot;feedbackSpoken&quot;      android:notificationTimeout=&quot;100&quot;     android:canRetrieveWindowContent=&quot;true&quot;    /&gt;</code></pre><p>è¿™é‡Œé¢æœ‰ä¸€äº›å¸¸ç”¨çš„å±æ€§ï¼Œç®€å•ä»‹ç»ä¸‹</p><pre><code>android:accessibilityEventTypes=&quot;typeAllMask&quot;</code></pre><p>çœ‹å±æ€§åä¹Ÿå·®ä¸å¤šå¯ä»¥æ˜ç™½ï¼Œè¿™ä¸ªæ˜¯ç”¨æ¥è®¾ç½®å“åº”äº‹ä»¶çš„ç±»å‹ï¼ŒtypeAllMaskå½“ç„¶å°±æ˜¯å“åº”æ‰€æœ‰ç±»å‹çš„äº‹ä»¶äº†ã€‚å½“ç„¶è¿˜æœ‰å•å‡»ã€é•¿æŒ‰ã€æ»‘åŠ¨ç­‰ã€‚ </p><pre><code>android:accessibilityFeedbackType=&quot;feedbackSpoken&quot;</code></pre><p>è®¾ç½®å›é¦ˆç»™ç”¨æˆ·çš„æ–¹å¼</p><pre><code>android:notificationTimeout=&quot;100&quot;</code></pre><p>å“åº”æ—¶é—´çš„è®¾ç½®å°±ä¸ç”¨å¤šè¯´äº† </p><pre><code>android:packageNames=&quot;com.notrace&quot;</code></pre><p>å¯ä»¥æŒ‡å®šå“åº”æŸä¸ªåº”ç”¨çš„äº‹ä»¶ï¼Œæˆ‘çš„demoåŒ…åå°±å«com.notrace,å¯ä»¥å¤šä¸ªï¼Œç”¨â€,â€éš”å¼€ã€‚</p><pre><code>android:description=&quot;æ¨¡æ‹Ÿç‚¹å‡»&quot;</code></pre></li></ol><p>æè¿°ä½ åœ¨ç³»ç»Ÿè¾…åŠ©åŠŸèƒ½å¼€å…³ä¸­çœ‹åˆ°çš„æè¿°</p><p>3.CheckAccessbilityServices  å®ç°onAccessibilityEventå’ŒonInterruptæ–¹æ³•</p><pre><code>     @Override   public void onAccessibilityEvent(AccessibilityEvent event) {             //è¿‡æ»¤åŒ…å         String pkgName = event.getPackageName().toString();             if(!&quot;com.notrace&quot;.equals(pkgName))                 return;         switch (type){                 case AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED:                 //åˆ‡æ¢é¡µé¢çš„æ—¶å€™æ­¤æ—¶ä¼šè§¦å‘ä¸€ä¸ªå«TYPE_WINDOW_STATE_CHANGEDçš„äº‹ä»¶             AccessibilityNodeInfo nodeInfo = getRootInActiveWindow();             if(nodeInfo!=null)  {                if(&quot;com.notrace.MainActivity&quot;.equals(event.getClassName())){                         List&lt;AccessibilityNodeInfo&gt;     list=                     nodeInfo.findAccessibilityNodeInfosByViewId(&quot;com.notrace:id/btn_click&quot;);               if(list!=null&amp;&amp;list.size()&gt;0)  {                       list.get(0).performAction(AccessibilityNodeInfo.ACTION_CLICK);                       }                   }                   break;           case AccessibilityEvent.TYPE_WINDOW_CONTENT_CHANGED:             break;       }                     }  </code></pre><p>æ³¨æ„è¿™é‡Œæœ‰ä¸ªå«com.notrace:id/btn_clickçš„ï¼Œå°±æ˜¯å‰é¢çš„é‚£ä¸ªæŒ‰é’®ï¼Œæˆ‘å–idå«btn_click,è¿™ä¸ªä¸œè¥¿å¯ä»¥é€šè¿‡eclipseæä¾›çš„ä¸€ä¸ªå·¥å…·dumpæŸ¥çœ‹,å¦‚ä¸‹å›¾ï¼š</p><p><img src="http://upload-images.jianshu.io/upload_images/1453857-78fa62630f5370b0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQæˆªå›¾20160808162014.png"></p><p>å¾®ä¿¡æŠ¢çº¢åŒ…çš„ç•Œé¢ä½ å°±å¯ä»¥è¿™ä¹ˆçœ‹äº†ã€‚<br>list.get(0).performAction(AccessibilityNodeInfo.ACTION_CLICK);      å°±æ˜¯æ¨¡æ‹Ÿç‚¹å‡»äº‹ä»¶</p><p>è‡³æ­¤ï¼Œæ¨¡æ‹Ÿç‚¹å‡»å°±å·²ç»å…¨éƒ¨å®Œæˆäº†ï¼Œæˆ‘ä»¬æ‰“å¼€æ‰‹æœºè¾…åŠ©åŠŸèƒ½ç•Œé¢ä¼šçœ‹è§ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/1453857-2b1084259b04dab0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQæˆªå›¾20160808162331.png"><br>ç‚¹å‡»è¿›å»ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/1453857-cd8e0447e512c2ba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQæˆªå›¾20160808162434.png"></p><p>æ‰“å¼€è¿™ä¸ªå¼€å…³å°±å¯ä»¥äº†ã€‚<br>è‡³æ­¤ï¼Œå½“é¡µé¢åˆ‡æ¢åˆ°MainActivityä¸­å°±å¯ä»¥å¼¹å‡ºtoastäº†ï¼Œè‡³äºåˆ«çš„å¥‡å¥‡æ€ªæ€ªçš„åŠŸèƒ½ï¼Œå°±éœ€è¦å°ä¼™ä¼´ä»¬è‡ªå·±æ‘¸ç´¢äº†ã€‚<br><a href="https://github.com/messnoTrace/Demo_Accessbility.git" target="_blank" rel="external">Demoä»£ç </a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;link href=&quot;http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css&quot; rel=&quot;stylesheet&quot;&gt;  &lt;/p&gt;
&lt;p&gt;&lt;script src=&quot;http://cdn.bo
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>android room å­˜å‚¨å¤æ‚æ•°æ®ç±»å‹</title>
    <link href="https://messnoTrace.github.io/2019/04/05/android-room-%E5%AD%98%E5%82%A8%E5%A4%8D%E6%9D%82%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
    <id>https://messnoTrace.github.io/2019/04/05/android-room-å­˜å‚¨å¤æ‚æ•°æ®ç±»å‹/</id>
    <published>2019-04-05T03:21:13.000Z</published>
    <updated>2019-04-05T03:51:02.920Z</updated>
    
    <content type="html"><![CDATA[<p><link href="http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css" rel="stylesheet">  </p><script src="http://cdn.bootcss.com/highlight.js/8.0/highlight.min.js"></script>  <script>hljs.initHighlightingOnLoad();</script>  <p>é¦–å…ˆçœ‹æ­¤æ–‡ç« çš„éƒ½å‡è®¾ä½ å·²ç»çœ‹è¿‡äº†roomçš„ç®€å•ç”¨æ³•ï¼Œå¦‚æœæ²¡æœ‰çœ‹è¿‡ï¼Œé‚£ä½ å¯èƒ½éœ€è¦å…ˆå»çœ‹çœ‹äº†ã€‚<br>å‡è®¾ï¼Œæˆ‘ä»¬ä»åå°è¿”å›ä¸€ä¸ªæ•°æ®ç±»å‹æ˜¯è¿™æ ·çš„ï¼š    </p><pre><code>    public class News{      public long id;      public String title;      public String title;      public List&lt;Tag&gt;tags;    }  public class Tag{    public long id;    public String name;}</code></pre><p>è¿™ç§æ•°æ®ç±»å‹å°±æ¯”è¾ƒå¾ˆå¸¸è§äº†ï¼Œå½“ç„¶äº†ï¼Œä½ ç¬¬ä¸€ååº”å¯èƒ½æ˜¯ï¼š è¿™ä¸ªå“ªé‡Œå¤æ‚äº†ï¼Œå—¯ï¼Œè¯´ä¸å¤æ‚ç¡®å®ä¸å¤æ‚ï¼Œè¯´å¤æ‚å‘¢ï¼Œæ˜¯å› ä¸ºç”¨roomçš„è¯ï¼Œç¡®å®æ¯”è¾ƒéº»çƒ¦ï¼Œè¯´ç™½äº†ï¼Œå°±æ˜¯å¦‚ä½•ç”¨ roomå­˜å‚¨å¸¦æœ‰lis<object>ç±»å‹çš„æ•°æ®ã€‚okè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬ç›´æ¥ä¸Šä»£ç ï¼š</object></p><p>###beançš„æ”¹é€ </p><pre><code>@Entity(tableName = &quot;news&quot;) public class News{@PrimaryKey(autoGenerate = true)  public long id;  public String title;  public String title; @Ignore  public List&lt;Tag&gt;tags;}  @Entity(tableName = &quot;tags&quot;) public class Tag{       @PrimaryKey(autoGenerate = true)        public long id;        public String name;         @ColumnInfo(name = &quot;news_id&quot;)      public long newsid;  }</code></pre><p>ç„¶åæˆ‘ä»¬é‡æ–°æ·»åŠ ä¸€ä¸ªbeanï¼šNewsWithTags:</p><pre><code>public class NewsWithTags{@Embeddedpublic News news;  @Relation(parentColumn = &quot;id&quot;,entityColumn = &quot;news_id&quot;)   public List&lt;Tag&gt; tags;    }</code></pre><p>æ³¨æ„çœ‹è¿™ä¸ªbeanï¼Œæ²¡æœ‰tableæ³¨è§£@Embedded æ³¨è§£çš„æ˜¯newsè¿™ä¸ªbeanã€‚<br>@Relation ä¸­parentColumnå¯¹åº”çš„æ˜¯newsä¸­çš„idï¼ŒentityColumnå¯¹åº”çš„æ˜¯tagä¸­çš„news_id,è¿™ä¸ªå€¼å®é™…ä¸Šå°±ç­‰äºnewsä¸­çš„idã€‚</p><p>####Dao<br>    NewsWithTagDao:</p><pre><code> @Daopublic interface NewsWithTaDao {@Transaction@Query(&quot;SELECT * FROM news&quot;)List&lt;NewsWithTag&gt; getAllNews();}</code></pre><blockquote><p>å…¶ä»–æ²¡å•¥å¥½è¯´çš„ï¼Œæ·»åŠ æ•°æ®è¦å…ˆæ·»åŠ newsï¼Œç„¶åæ ¹æ®news çš„idæ·»åŠ tagï¼Œåˆ é™¤æ•°æ®ï¼Œè¦å…ˆæ ¹æ®newsçš„idåˆ é™¤tagè¡¨ä¸­çš„æ•°æ®</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;link href=&quot;http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css&quot; rel=&quot;stylesheet&quot;&gt;  &lt;/p&gt;
&lt;script src=&quot;http://cdn.bootc
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>å…³äºUnable to resolve dependency for xxCould not resolve libraryçš„è§£å†³æ–¹æ¡ˆ</title>
    <link href="https://messnoTrace.github.io/2019/04/05/%E5%85%B3%E4%BA%8EUnable%20to%20resolve%20dependency%20for%20xxCould%20not%20resolve%20library%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <id>https://messnoTrace.github.io/2019/04/05/å…³äºUnable to resolve dependency for xxCould not resolve libraryçš„è§£å†³æ–¹æ¡ˆ/</id>
    <published>2019-04-05T02:39:39.000Z</published>
    <updated>2019-04-05T03:48:32.413Z</updated>
    
    <content type="html"><![CDATA[<p>å…ˆä»‹ç»ä¸‹èƒŒæ™¯ï¼Œç¯å¢ƒæ˜¯Androidstudio3.1.3ï¼Œæ²¡é”™ï¼Œæˆªæ­¢ç›®å‰æ˜¯æœ€æ–°çš„ï¼Œåœ¨ä¸ä¹…ä¹‹å‰ï¼Œæˆ‘ç”¨çš„æ˜¯3.1.2ï¼Œç„¶åæ–°å»ºé¡¹ç›®ï¼Œæ•²ä¸Šä»£ç ï¼Œimplemention å„ç§é¡ºæ‰‹çš„libraryï¼Œæ¯›é—®é¢˜éƒ½æ²¡æœ‰ï¼Œå‡çº§äº†3.1.3ä¹‹åï¼Œæˆ‘æƒ³åŠ ä¸€ä¸ªåº“ï¼Œç»“æœå‡ºç°äº†å¦‚ä¸‹çš„å„ç§é—®é¢˜ã€‚<img src="https://upload-images.jianshu.io/upload_images/1453857-4489eca9ee9892f6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180626-110232.png"></p><p>ä¸€å¼€å§‹æˆ‘ä»¥ä¸ºæ˜¯åº“çš„é—®é¢˜ï¼Œç„¶åä¸€é¡¿googleæœç´¢ï¼š<br><img src="https://upload-images.jianshu.io/upload_images/1453857-b767224e5beb26ec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180626-110400@2x.png"></p><p>çœ¼ç›ä¸€äº®ï¼Œçœ‹åˆ°ç¬¬äºŒä¸ªç­”æ¡ˆç›´æ¥å‡ºç°å…³é”®è¯androidstudio3.0ï¼Œå¿ƒé‡Œé¡¿æ—¶ä¸€é˜µé¸¡å†»ï¼Œç‚¹è¿›å»çœ‹çœ‹ç­”æ¡ˆï¼Œç›´æ¥æ‰¾è®¤åŒæœ€å¤šçš„ç­”æ¡ˆï¼š<br><img src="https://upload-images.jianshu.io/upload_images/1453857-2d2ff13fcdfab998.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180626-110636@2x.png"></p><p>æ„æ€æ˜¯å•¥å‘¢ï¼Œå¤§æ¦‚å°±æ˜¯è¯´åœ¨andoridsutio2.xå‘3.xè¿ç§»çš„æ—¶å€™éœ€è¦æ³¨æ„ä¿®æ”¹çš„ä¸œè¥¿ï¼Œç„¶å¹¶åµå•Šï¼Œæˆ‘æ˜¯ç›´æ¥ä¸Šçš„3.Xçš„æ–°é¡¹ç›®ï¼Œæ²¡æœ‰è¿ç§»ä¸€è¯´ã€‚éšååˆæ˜¯ä¸€é˜µæœç´¢ï¼Œè¿™ä¸‹å°±å°´å°¬äº†ï¼Œç­”æ¡ˆåŸºæœ¬ä¸Šéƒ½æ˜¯ç±»ä¼¼è¿™æ · çš„å’Œä¸å‹¾é€‰gradle offline workè¿™ä¸ªé€‰é¡¹ï¼Œå„ç§æœç´¢å„ç§çš„è´¼é¸¡å„¿è›‹ç–¼ï¼Œå¹´è½»äººä½ æ„Ÿè§‰å¾—åˆ°ç»æœ›ä¹ˆï¼Œæˆ‘åœ¨æƒ³ï¼Œå¦‚æœæ—¶å…‰å¯ä»¥å€’æµï¼Œæˆ‘è‚¯å®šä¸æ‰‹è´±å‡çº§AndroidStudioï¼Œä»¥å‰çš„2.xç”¨èµ·æ¥ï¼Œæ˜¯æ¯›é—®é¢˜éƒ½æ²¡æœ‰å•Šï¼Œgoogleéƒ½æ•‘ä¸äº†æˆ‘äº†ï¼Œæˆ‘æ€•æ˜¯æ²¡æ•‘äº†ï¼Œç»æœ›ã€‚æ·»åŠ ä¸äº†ä»»ä½•åº“ï¼Œè¿™ä¸ªé—®é¢˜ï¼Œæ˜¯çœŸçš„çœŸçš„å¾ˆè›‹ç–¼å•Šï¼Œå•¥éƒ½è¦è‡ªå·±å†™ï¼Œæ¢ä½ ï¼Œä½ æ„¿æ„ä¹ˆï¼Ÿåæ­£æˆ‘æ˜¯ä¸æ„¿æ„ã€‚ã€‚<br>æ¥ç€åˆæ˜¯ä¸€æ³¢æ“ä½œçŒ›å¦‚è™ï¼Œä¸­é—´è¿‡ç¨‹å°±ä¸é‡è¦äº†ï¼Œç›´æ¥è·³ç»“æœå§ã€‚<br>æ‰“å¼€Terminalé€‰é¡¹å¡ï¼Œè¾“å…¥ ./gradlew buildï¼ˆwindowsä¸‹æ˜¯gradlew buildæç¤ºæ²¡è¿™ä¸ªå‘½ä»¤çš„ï¼Œé‚£å°±æ˜¯ä½ çš„gradleç¯å¢ƒå˜é‡æ²¡é…ç½®ï¼‰-&gt; å›è½¦</p><p><img src="https://upload-images.jianshu.io/upload_images/1453857-6a68fddb44522e5f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180626-111908.png"></p><p>é‡ç‚¹æ¥äº†ï¼Œ<code>Connect to 127.0.0.1:1080 [/127.0.0.1] failed: Connection refused (Connection refused)</code> mmp æœç´¢ï¼š<br><img src="https://upload-images.jianshu.io/upload_images/1453857-e4706390e41dfdf8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180626-112122@2x.png"></p><p>ç¬¬ä¸€ä¸ªç‚¹è¿›å» <a href="https://blog.csdn.net/Rainminism/article/details/79713788" target="_blank" rel="external">é“¾æ¥</a><br>è¿›å»ä¸€çœ‹è¯´æˆ‘ä»¬ä½¿ç”¨äº†ä»£ç†ï¼Œè¦ä¿®æ”¹gradle.properties æ–‡ä»¶ï¼Œç„¶åé»˜é»˜çš„æ‰“å¼€æˆ‘ä»¬çš„å·¥ç¨‹æ­¤æ–‡ä»¶ä¸€çœ‹ï¼Œ<img src="https://upload-images.jianshu.io/upload_images/1453857-23b4e09470d702f9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180626-112620.png"></p><p>æ„ä¸æ„å¤–ï¼ŒæƒŠä¸æƒŠå–œï¼Œé‡Œé¢æ¯›éƒ½æ²¡æœ‰å•Šï¼Œç„¶åæœ‰æ²¡æœ‰äººè·Ÿæˆ‘ä¸€æ ·ï¼Œæœ‰ç‚¹æ€€ç–‘äººç”Ÿäº†ï¼Œæ€ä¹ˆåŠæ€ä¹ˆåŠï¼Œç»§ç»­æœç´¢å•Šï¼Œæœç„¶ï¼Œåœ¨ä¸€ä¸ªç­”æ¡ˆä¸­å‘ç°äº†è‡ªå·±æ˜¯æœ‰å¤šå‚»é€¼<br><img src="https://upload-images.jianshu.io/upload_images/1453857-f646707a7e7906d8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180626-113000@2x.png"></p><p>é‡ç‚¹æ¥äº†ï¼Œç¬¬ä¸€å¥ï¼Œ<code>Go to gradle scripts</code> ï¼Œå§æ§½ï¼Œæˆ‘æƒ³èµ·æ¥ä¸ªä¸œè¥¿ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨çš„éƒ½æ˜¯projectè§†å›¾å•Šï¼Œæ–°å»ºé¡¹ç›®éƒ½æ˜¯Androidè§†å›¾å•Šï¼Œè¦æ˜¯ä½ æ›¾ç»çœ‹è¿‡Andoridè§†å›¾ï¼Œæˆ–è€…è¯´ä½ æ›¾ç»è§£å†³è¿‡Andoridstudioé‡åˆ°çš„å‘ï¼Œé‚£ä½ å°±æ˜ç™½äº†æˆ‘è¯´çš„æ˜¯å•¥ï¼Œå“å¾—æˆ‘èµ¶ç´§åˆ‡æ¢åˆ°Androidè§†å›¾ï¼š<br><img src="https://upload-images.jianshu.io/upload_images/1453857-834fb634600acea8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180626-113441.png"></p><p>æœç„¶ï¼Œ<code>globle properties</code><br>æ‰“å¼€ä¸€çœ‹ï¼Œmmpï¼Œæœç„¶å­˜åœ¨ï¼š<img src="https://upload-images.jianshu.io/upload_images/1453857-5b2fc6c929a87506.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20180626-113550.png"><br>æœæ–­æ³¨é‡Šï¼Œé‡æ–°ç¼–è¯‘ï¼Œè€é“ï¼ŒçœŸçš„æ²¡æ¯›ç—…äº†ã€‚ğŸ˜Œ mmp</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å…ˆä»‹ç»ä¸‹èƒŒæ™¯ï¼Œç¯å¢ƒæ˜¯Androidstudio3.1.3ï¼Œæ²¡é”™ï¼Œæˆªæ­¢ç›®å‰æ˜¯æœ€æ–°çš„ï¼Œåœ¨ä¸ä¹…ä¹‹å‰ï¼Œæˆ‘ç”¨çš„æ˜¯3.1.2ï¼Œç„¶åæ–°å»ºé¡¹ç›®ï¼Œæ•²ä¸Šä»£ç ï¼Œimplemention å„ç§é¡ºæ‰‹çš„libraryï¼Œæ¯›é—®é¢˜éƒ½æ²¡æœ‰ï¼Œå‡çº§äº†3.1.3ä¹‹åï¼Œæˆ‘æƒ³åŠ ä¸€ä¸ªåº“ï¼Œç»“æœå‡ºç°äº†å¦‚ä¸‹çš„å„ç§é—®é¢˜ã€‚&lt;img
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>å¤šçº¿ç¨‹ä¸­wait/notifyçš„ä¸€äº›ç†è§£ï¼Œä»¥åŠæœ€ç»å…¸çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…</title>
    <link href="https://messnoTrace.github.io/2019/04/05/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%ADwait-notify%E7%9A%84%E4%B8%80%E4%BA%9B%E7%90%86%E8%A7%A3%EF%BC%8C%E4%BB%A5%E5%8F%8A%E6%9C%80%E7%BB%8F%E5%85%B8%E7%9A%84%E7%94%9F%E4%BA%A7%E8%80%85%E5%92%8C%E6%B6%88%E8%B4%B9%E8%80%85/"/>
    <id>https://messnoTrace.github.io/2019/04/05/å¤šçº¿ç¨‹ä¸­wait-notifyçš„ä¸€äº›ç†è§£ï¼Œä»¥åŠæœ€ç»å…¸çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…/</id>
    <published>2019-04-05T02:37:28.000Z</published>
    <updated>2019-04-05T03:51:44.996Z</updated>
    
    <content type="html"><![CDATA[<p><link href="http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css" rel="stylesheet">  </p><script src="http://cdn.bootcss.com/highlight.js/8.0/highlight.min.js"></script>  <script>hljs.initHighlightingOnLoad();</script>  <p>###å‰è¨€<br>è¯´åˆ°waitï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°ä¸€ä¸ªå¸¸é—®çš„é¢è¯•é¢˜ï¼Œwaitå’Œsleepçš„åŒºåˆ«ã€‚ç®€å•çš„ç†è§£å°±æ˜¯ï¼Œwaitæ˜¯objectçš„æ–¹æ³•ï¼Œè°ƒç”¨wait()ï¼Œçº¿ç¨‹ä¼šè¿›å»ç­‰å¾…çŠ¶æ€ï¼Œå¹¶ä¸”ä¼šé‡Šæ”¾å‡ºé”ï¼Œéé˜»å¡çš„ï¼Œç­‰å¾…æŒæœ‰é”çš„çº¿ç¨‹è°ƒç”¨notify()ï¼Œæ‰ä¼šç»§ç»­æ‰§è¡Œã€‚sleepæ˜¯Threadçš„æ–¹æ³•ï¼Œsleep()ä¼šè®©å½“å‰çº¿ç¨‹æš‚åœä¸€æ®µæ—¶é—´ï¼Œä½†æ˜¯ä¸ä¼šé‡Šæ”¾é”ï¼Œæ˜¯é˜»å¡çš„ã€‚</p><p>###Wait/notifyåœ¨çº¿ç¨‹ä¸­çš„é€šä¿¡<br>æˆ‘ä»¬å…ˆçœ‹ä¸‹é¢ä¸€æ®µä»£ç ï¼š<br> class Data:</p><pre><code>      package com.notrace;      import java.util.ArrayList;      import java.util.List;      public class Data {  private List list=new ArrayList();    public void add() {      list.add(&quot;notrace&quot;);  }    public int getSize() {  return list.size();  }}</code></pre><p>ThreadAï¼š</p><pre><code>  package com.notrace;       public class ThreadA extends Thread{ private Data data; public ThreadA(Data data) {    super();    this.data=data;}@Overridepublic void run() {    try {        for (int i = 0; i &lt; 10; i++) {            data.add();            System.out.println(&quot;æ·»åŠ äº†&quot;+(i+1)+&quot;ä¸ªå…ƒç´ &quot;);            Thread.sleep(1000);        }    } catch (Exception e) {    }}     }</code></pre><p>ThreadB:</p><pre><code>package com.notrace;public class ThreadB extends Thread{private Data data;public ThreadB(Data data) {    super();    this.data=data;}@Overridepublic void run() {    try {        while (true) {    System.out.print(&quot;&quot;);            if(data.getSize()==6) {                System.out.println(&quot;==6,çº¿ç¨‹Bè¦é€€å‡ºäº†&quot;);                throw new InterruptedException();            }        }    } catch (Exception e) {        e.printStackTrace();    }}}</code></pre><p>Test:</p><pre><code>  package com.notrace;public class Test {public static  void  main(String []args) {    Data data=new Data();    ThreadA threadA=new ThreadA(data);    threadA.setName(&quot;A&quot;);    threadA.start();    ThreadB threadB=new ThreadB(data);    threadB.setName(&quot;B&quot;);    threadB.start();}}</code></pre><p>è¿è¡Œtestï¼Œç»“æœå¦‚ä¸‹ï¼š<img src="https://upload-images.jianshu.io/upload_images/1453857-21d6e937cb766da6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1.png"></p><p>ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´å®ç°äº†é€šä¿¡ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œå°±æ˜¯çº¿ç¨‹Bï¼Œè¦ä¸åœçš„å¾ªç¯ï¼Œè¿™æ ·ä¼šå¾ˆæµªè´¹èµ„æºï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„åŠæ³•å»å®ç°å¤šä¸ªçº¿ç¨‹é€šä¿¡å‘¢ï¼Œç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå°±æ˜¯wait/notifyçš„æœºåˆ¶ã€‚</p><p>###wait/notifyæœºåˆ¶ç®€å•ä»‹ç»<br>ä¸¾ä¸ªæ —å­ï¼Œå°±è¯´æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­çš„é¤å…å§ï¼Œå¨å¸ˆå’ŒæœåŠ¡å‘˜ä¹‹é—´çš„äº¤äº’ï¼Œ<br>å¨å¸ˆåšå®Œèœï¼Œæ”¾åˆ°ä¼ é€’å°ä¸Šï¼ŒæœåŠ¡å‘˜æ¥ä¼ é€’å°ä¸Šå–ï¼Œå¾€æ¡Œä¸Šé€ã€‚<br> 1ï¼‰å¨å¸ˆåšå®Œä¸€é“èœçš„æ—¶é—´æ˜¯ä¸ç¡®å®šçš„ï¼Œæ‰€ä»¥æŠŠèœæ”¾åˆ°ä¼ é€’å°ä¸Šçš„æ—¶é—´ä¹Ÿæ˜¯ä¸ç¡®å®šçš„ã€‚<br>2ï¼‰æœåŠ¡å‘˜å–èœçš„æ—¶é—´ï¼Œå–å†³äºå¨å¸ˆï¼Œæ‰€ä»¥ï¼Œå¨å¸ˆåšå®Œèœä¹‹å‰ï¼ŒæœåŠ¡å‘˜ï¼Œå°±æœ‰äº†ç­‰å¾…(wait)çš„çŠ¶æ€ã€‚<br>3ï¼‰æœåŠ¡å‘˜æ˜¯æ€ä¹ˆå–åˆ°èœå‘¢ï¼Ÿè¿™å–å†³äºå¨å¸ˆï¼Œç®€å•ç‚¹æ¥è¯´ï¼Œå¨å¸ˆåšå®Œèœï¼Œæ”¾åˆ°ä¼ é€’å°ä¸Šï¼Œç„¶åå¤§å–Šä¸€å£°ï¼šâ€œçº¢çƒ§è‚‰å¥½äº†ï¼Œæ¥ä¸Šèœã€‚â€ç„¶åæœåŠ¡å‘˜å°±è¿‡æ¥å–äº†ï¼Œè¿™ä¸ªå¤§å–Šä¸€å£°ï¼Œå°±ç›¸å½“äºnotifyçš„è¿‡ç¨‹ã€‚<br>4ï¼‰è¿™ä¸ªæƒ…æ™¯ä¸­å°±æœ‰wait/notifyçš„æœºåˆ¶äº†ï¼Œé‚£ä¹ˆå¦‚ä½•ç”¨ä»£ç æ¥å®ç°å‘¢ï¼Ÿ</p><p>####wait/notifyæœºåˆ¶ç®€å•å®ç°<br>æ–¹æ³•waitï¼ˆï¼‰çš„ä½œç”¨æ˜¯ä½¿å½“å‰æ‰§è¡Œä»£ç çš„çº¿ç¨‹è¿›è¡Œç­‰å¾…ï¼Œwaitï¼ˆï¼‰æ–¹æ³•æ˜¯Objectç±»çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨æ¥å°†å½“å‰çº¿ç¨‹ç½®å…¥â€œé¢„æ‰§è¡Œé˜Ÿåˆ—â€ä¸­ï¼Œå¹¶ä¸”åœ¨waitï¼ˆï¼‰æ‰€åœ¨çš„ä»£ç è¡Œå¤„åœæ­¢æ‰§è¡Œï¼Œç›´åˆ°æ¥åˆ°é€šçŸ¥æˆ–è¢«ä¸­æ–­ä¸ºæ­¢ã€‚åœ¨è°ƒç”¨waitï¼ˆï¼‰ä¹‹å‰ï¼Œ<strong>çº¿ç¨‹å¿…é¡»è·å¾—è¯¥å¯¹è±¡çš„å¯¹è±¡çº§åˆ«é”ï¼Œå³åªèƒ½åœ¨åŒæ­¥æ–¹æ³•æˆ–åŒæ­¥å—ä¸­è°ƒç”¨waitï¼ˆï¼‰æ–¹æ³•ã€‚åœ¨æ‰§è¡Œwaitï¼ˆï¼‰æ–¹æ³•åï¼Œå½“å‰çº¿ç¨‹é‡Šæ”¾é”ã€‚</strong> åœ¨ä»waitï¼ˆï¼‰è¿”å›å‰ï¼Œçº¿ç¨‹ä¸å…¶ä»–çº¿ç¨‹ç«äº‰é‡æ–°è·å¾—é”ã€‚å¦‚æœè°ƒç”¨waitï¼ˆï¼‰æ—¶æ²¡æœ‰æŒæœ‰é€‚å½“çš„é”ï¼Œåˆ™æŠ›å‡ºIllegalMonitorStateExceptionï¼Œå®ƒæ˜¯RuntimeExceptionçš„ä¸€ä¸ªå­ç±»ï¼Œå› æ­¤ï¼Œä¸éœ€è¦try-catchè¯­å¥è¿›è¡Œæ•æ‰å¼‚å¸¸ã€‚<br><strong>æ–¹æ³•notifyï¼ˆï¼‰ä¹Ÿè¦åœ¨åŒæ­¥æ–¹æ³•æˆ–åŒæ­¥å—ä¸­è°ƒç”¨ï¼Œå³åœ¨è°ƒç”¨å‰ï¼Œçº¿ç¨‹ä¹Ÿå¿…é¡»è·å¾—è¯¥å¯¹è±¡çš„å¯¹è±¡çº§åˆ«é”ã€‚å¦‚æœè°ƒç”¨notifyï¼ˆï¼‰æ—¶æ²¡æœ‰æŒæœ‰é€‚å½“çš„é”ï¼Œä¹Ÿä¼šæŠ›å‡ºIllegalMonitorStateExceptionã€‚</strong>è¯¥æ–¹æ³•ç”¨æ¥é€šçŸ¥é‚£äº›å¯èƒ½ç­‰å¾…è¯¥å¯¹è±¡çš„å¯¹è±¡é”çš„å…¶ä»–çº¿ç¨‹ï¼Œå¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹ç­‰å¾…ï¼Œåˆ™ç”±çº¿ç¨‹è§„åˆ’å™¨éšæœºæŒ‘é€‰å‡ºå…¶ä¸­ä¸€ä¸ªå‘ˆwaitçŠ¶æ€çš„çº¿ç¨‹ï¼Œå¯¹å…¶å‘å‡ºé€šçŸ¥notifyï¼Œå¹¶ä½¿å®ƒç­‰å¾…è·å–è¯¥å¯¹è±¡çš„å¯¹è±¡é”ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåœ¨æ‰§è¡Œnotifyï¼ˆï¼‰æ–¹æ³•åï¼Œå½“å‰çº¿ç¨‹ä¸ä¼šé©¬ä¸Šé‡Šæ”¾è¯¥å¯¹è±¡é”ï¼Œå‘ˆwaitçŠ¶æ€çš„çº¿ç¨‹ä¹Ÿå¹¶ä¸èƒ½é©¬ä¸Šè·å–è¯¥å¯¹è±¡é”ï¼Œè¦ç­‰åˆ°æ‰§è¡Œnotifyï¼ˆï¼‰æ–¹æ³•çš„çº¿ç¨‹å°†ç¨‹åºæ‰§è¡Œå®Œï¼Œä¹Ÿå°±æ˜¯é€€å‡ºsynchronizedä»£ç å—åï¼Œå½“å‰çº¿ç¨‹æ‰ä¼šé‡Šæ”¾é”ï¼Œè€Œå‘ˆwaitçŠ¶æ€æ‰€åœ¨çš„çº¿ç¨‹æ‰å¯ä»¥è·å–è¯¥å¯¹è±¡é”ã€‚å½“ç¬¬ä¸€ä¸ªè·å¾—äº†è¯¥å¯¹è±¡é”çš„waitçº¿ç¨‹è¿è¡Œå®Œæ¯•ä»¥åï¼Œå®ƒä¼šé‡Šæ”¾æ‰è¯¥å¯¹è±¡é”ï¼Œæ­¤æ—¶å¦‚æœè¯¥å¯¹è±¡æ²¡æœ‰å†æ¬¡ä½¿ç”¨notifyè¯­å¥ï¼Œåˆ™å³ä¾¿è¯¥å¯¹è±¡å·²ç»ç©ºé—²ï¼Œå…¶ä»–waitçŠ¶æ€ç­‰å¾…çš„çº¿ç¨‹ç”±äºæ²¡æœ‰å¾—åˆ°è¯¥å¯¹è±¡çš„é€šçŸ¥ï¼Œè¿˜ä¼šç»§ç»­é˜»å¡åœ¨waitçŠ¶æ€ï¼Œç›´åˆ°è¿™ä¸ªå¯¹è±¡å‘å‡ºä¸€ä¸ªnotifyæˆ–notifyAllã€‚<br>   ç”¨ä¸€å¥è¯æ¥æ€»ç»“ä¸€ä¸‹waitå’Œnotifyï¼šwaitä½¿çº¿ç¨‹åœæ­¢è¿è¡Œï¼Œè€Œnotifyä½¿åœæ­¢çš„çº¿ç¨‹ç»§ç»­è¿è¡Œã€‚<br>ä»£ç æµ‹è¯•å¦‚ä¸‹ï¼š<br>ThreadA:</p><pre><code>      package com.notrace;public class ThreadA extends Thread {private Object lock;public ThreadA(Object lock) {    super();    this.lock = lock;}@Overridepublic void run() {    try {        synchronized (lock) {            System.out.println(&quot;begin wait time&quot; +       System.currentTimeMillis());            lock.wait();            System.out.println(&quot;end wait time&quot; + System.currentTimeMillis());        }    } catch (Exception e) {        e.printStackTrace();    }}}</code></pre><p>ThreadB:</p><pre><code>        package com.notrace;public class ThreadB extends Thread {private Object lock;public ThreadB(Object lock) {    super();    this.lock = lock;}@Overridepublic void run() {    try {        synchronized (lock) {            System.out.println(&quot;begin notify time:&quot; + System.currentTimeMillis());            lock.notify();            System.out.println(&quot;end nofity time:&quot; + System.currentTimeMillis());        }    } catch (Exception e) {        e.printStackTrace();        System.out.println(e.toString());    }}}</code></pre><p>Test:</p><pre><code>package com.notrace;</code></pre><p>public class Test {<br>    public static void main(String[] args) {</p><pre><code>    try {        Object lock = new Object();        ThreadA threadA = new ThreadA(lock);        threadA.setName(&quot;A&quot;);        threadA.start();        Thread.sleep(3000);        ThreadB threadB = new ThreadB(lock);        threadB.setName(&quot;B&quot;);        threadB.start();    } catch (InterruptedException e) {        // TODO Auto-generated catch block        e.printStackTrace();    }}  }</code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹å›¾ï¼š<br>  <img src="https://upload-images.jianshu.io/upload_images/1453857-070a66f33dd162b9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2.png"></p><p>ä»æ‰“å°ç»“æœæ¥çœ‹ï¼Œ3Såçº¿ç¨‹åˆ«nofityå”¤é†’.<br>æˆ‘ä»¬å†æ¥å®ç°ä¸‹ä¹‹å‰çš„ä¸Šé¢é‚£ä¸ªä¾‹å­ï¼š<br>ThreadA:</p><pre><code>        package com.notrace;    public class ThreadA extends Thread {private Object lock;public ThreadA(Object lock) {    super();    this.lock = lock;}@Overridepublic void run() {    try {        synchronized (lock) {            if(Data.getSize()!=6)            System.out.println(&quot;begin wait time&quot; +       System.currentTimeMillis());            lock.wait();            System.out.println(&quot;end wait time&quot; + System.currentTimeMillis());        }    } catch (Exception e) {        e.printStackTrace();    }}}</code></pre><p>ThreadB:</p><pre><code>        package com.notrace;  public class ThreadB extends Thread{    private Object  lock;  public ThreadB(Object lock) {    super();    this.lock=lock;}@Overridepublic void run() {    try {    synchronized (lock) {        for (int i = 0; i &lt; 10; i++) {            Data.add();            if(Data.getSize()==6) {                lock.notify();                System.out.println(&quot;å‘å‡ºé€šçŸ¥&quot;);            }            System.out.println(&quot;æ·»åŠ äº†&quot;+(i+1)+&quot;ä¸ªå…ƒç´ &quot;);            Thread.sleep(1000);        }            }} catch (Exception e) {    e.printStackTrace();    System.out.println(e.toString());}}}</code></pre><p>Data:</p><pre><code>        package com.notrace;  import java.util.ArrayList;  import java.util.List;  public class Data {private static List list = new ArrayList();public static void add() {    list.add(&quot;notrace&quot;);}public static int getSize() {    return list.size();}    }</code></pre><p>Test:</p><pre><code>      package com.notrace;    public class Test {public static void main(String[] args) {    try {        Object lock = new Object();        ThreadA threadA = new ThreadA(lock);        threadA.setName(&quot;A&quot;);        threadA.start();        Thread.sleep(50);        ThreadB threadB = new ThreadB(lock);        threadB.setName(&quot;B&quot;);        threadB.start();    } catch (InterruptedException e) {        // TODO Auto-generated catch block        e.printStackTrace();    }}}</code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹:<br><img src="https://upload-images.jianshu.io/upload_images/1453857-584bcf34b652abb9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="3.png"></p><p>æ—¥å¿—è¯´æ˜äº†ä¸€ä¸ªé—®é¢˜,notify()è°ƒç”¨ä¹‹åï¼Œå¹¶ä¸ä¼šç«‹å³é‡Šæ”¾é”ï¼Œè€Œæ˜¯ä¼šæ¥ç€æ‰§è¡Œåé¢çš„ä»£ç ï¼Œæ‰§è¡Œå®Œäº†ï¼Œæ‰ä¼šé‡Šæ”¾é”ã€‚</p><p>synchronizedå¯ä»¥å°†ä»»ä½•ä¸€ä¸ªObjectå¯¹è±¡ä½œä¸ºåŒæ­¥å¯¹è±¡æ¥çœ‹å¾…ï¼Œæ¯ä¸ªObjectéƒ½å®ç°äº†wait()å’Œnotify()ã€‚ä»–ä»¬å¿…é¡»ç”¨è¢«ç”¨åœ¨synchronizedåŒæ­¥çš„åŒºåŸŸå†…ï¼Œwait()è®©åŒºåŸŸå†…çš„çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œé‡Šæ”¾åŒæ­¥é”ï¼Œnotify()å¯ä»¥å”¤é†’ä¸€ä¸ªå› è°ƒç”¨äº†wait()è€Œå¤„äºç­‰å¾…çŠ¶æ€ä¸­çš„çº¿ç¨‹ã€‚è¢«å”¤é†’çš„çº¿ç¨‹ç»§ç»­æ‰§è¡Œwait()åé¢çš„ä»£ç ã€‚å¦‚æœnotifyä¹‹åæ²¡æœ‰å¤„äºé˜»å¡ç­‰å¾…ä¸­çš„çº¿ç¨‹ï¼Œå°±ä¼šè¢«å¿½ç•¥ã€‚<br>å…³äºé‡Šæ”¾é”ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªç»“è®ºï¼Œ<br>1ï¼‰æ‰§è¡Œå®ŒåŒæ­¥ä»£ç å—ï¼Œå°±ä¼šé‡Šæ”¾é”ã€‚<br>2ï¼‰æ‰§è¡Œä»£ç å—çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°å¼‚å¸¸è€Œå¯¼è‡´çº¿ç¨‹ç»ˆæ­¢ï¼Œä¹Ÿä¼šé‡Šæ”¾é”ã€‚<br>3ï¼‰è°ƒç”¨wait()è¿™ä¸ªçº¿ç¨‹ä¼šé‡Šæ”¾é”ã€‚</p><p>å¦å¤–è¿˜æœ‰ä¸€ç‚¹ï¼Œéœ€è¦æä¸€ä¸‹ã€‚notify()åªä¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥åœ¨å¤šçº¿ç¨‹çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œæ‰€ä»¥ï¼Œå°½é‡ç”¨notifyAll()å”¤é†’æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹ æ¯”è¾ƒå¥½ã€‚ä¸‹é¢æ¥çœ‹çœ‹å¦ä¸€ä¸ªç»å…¸é—®é¢˜ã€‚</p><p>###ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å¼</p><p>###ä¸€ä¸ªç”Ÿäº§è€…ï¼Œä¸€ä¸ªæ¶ˆè´¹è€…<br>åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥çœ‹code.<br>ç”Ÿäº§è€…P:</p><pre><code>            package com.notrace;  //ç”Ÿäº§è€…  public class P {private String lock;public P(String lock) {    super();    this.lock=lock;}public void setValue() {    try {        synchronized (lock) {            if(!ValueObj.value.equals(&quot;&quot;)) {                lock.wait();            }            String value=System.currentTimeMillis()+&quot;&quot;;            System.out.println(&quot;setçš„å€¼ï¼š&quot;+value);            ValueObj.value=value;            lock.notify();        }    } catch (Exception e) {        // TODO: handle exception    }}}</code></pre><p>æ¶ˆè´¹è€…C:</p><pre><code>  package com.notrace;    //æ¶ˆè´¹è€…    public class C {private String lock;public C(String lock) {    super();    this.lock=lock;}public void getValue() {try {    synchronized (lock) {        if(ValueObj.value.equals(&quot;&quot;)) {            lock.wait();        }        System.out.println(&quot;getçš„å€¼:&quot;+ValueObj.value);        ValueObj.value=&quot;&quot;;        lock.notify();    }} catch (Exception e) {    // TODO: handle exception}}}</code></pre><p>çº¿ç¨‹Pï¼š</p><pre><code>    package com.notrace;public class ThreadP extends Thread{private P p;public ThreadP(P p) {    super();    this.p=p;}@Overridepublic void run() {    while(true) {        p.setValue();    }}}</code></pre><p>çº¿ç¨‹Cï¼š</p><pre><code>            package com.notrace;  public class ThreadC extends Thread{private C c;public ThreadC(C c) {    super();    this.c=c;}@Overridepublic void run() {    while(true) {        c.getValue();    }}}</code></pre><p>Runï¼š</p><pre><code>          package com.notrace;public class Run {public static void main(String []args) {    String lock=new String(&quot;&quot;);    P p=new P(lock);    C c=new C(lock);    ThreadP tP=new ThreadP(p);    ThreadC tC=new ThreadC(c);    tP.start();    tC.start();}}</code></pre><p>è¿è¡Œç»“æœï¼š<br><img src="https://upload-images.jianshu.io/upload_images/1453857-eb6739d745cb9929.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="4.png"></p><p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œæ˜¯ç”Ÿäº§è€…ï¼Œæ¶ˆè´¹è€…ï¼Œäº¤æ›¿è¿è¡Œçš„ã€‚</p><p>æ¥ä¸‹æ¥å˜åŒ–ä¸€ä¸‹:</p><p>######å¤šç”Ÿäº§è€…ï¼Œå¤šæ¶ˆè´¹è€…</p><p>P:</p><pre><code>    package com.notrace;  //ç”Ÿäº§è€…  public class P {private String lock;public P(String lock) {    super();    this.lock=lock;}public void setValue() {    try {        synchronized (lock) {            while(!ValueObj.value.equals(&quot;&quot;)) {                System.out.println(&quot;ç”Ÿäº§è€…:&quot;+Thread.currentThread().getName()+&quot;watting*&quot;);                lock.wait();            }            System.out.println(&quot;ç”Ÿäº§è€…:&quot;+Thread.currentThread().getName()+&quot;run*&quot;);            String value =System.currentTimeMillis()+&quot;&quot;;            ValueObj.value=value;            lock.notify();        }    } catch (Exception e) {        // TODO: handle exception    }}}</code></pre><p>C:</p><pre><code>  package com.notrace;//æ¶ˆè´¹è€…  public class C {private String lock;public C(String lock) {    super();    this.lock=lock;}public void getValue() {try {    synchronized (lock) {        while(ValueObj.value.equals(&quot;&quot;)) {            System.out.println(&quot;æ¶ˆè´¹è€…:&quot;+Thread.currentThread().getName()+&quot;waitting&quot;);            lock.wait();        }        System.out.println(&quot;æ¶ˆè´¹è€…:&quot;+Thread.currentThread().getName()+&quot;run&quot;);        System.out.println(&quot;getçš„å€¼:&quot;+ValueObj.value);        ValueObj.value=&quot;&quot;;        lock.notify();    }} catch (Exception e) {    // TODO: handle exception}}}</code></pre><p>threadPï¼ŒthreadCä¸€æ ·:</p><p>Run:</p><pre><code>        package com.notrace;  public class Run {public static void main(String []args) {    try {        String lock=new String(&quot;&quot;);        P p=new P(lock);        C c=new C(lock);        ThreadP[] pThreadPs=new ThreadP[2];        ThreadC[]cThreadCs=new ThreadC[2];        for(int i=0;i&lt;2;i++) {            pThreadPs[i]=new ThreadP(p);            pThreadPs[i].setName(&quot;ç”Ÿäº§è€…&quot;+(i+1));            cThreadCs[i]=new ThreadC(c);            cThreadCs[i].setName(&quot;æ¶ˆè´¹è€…&quot;+(i+1));            pThreadPs[i].start();            cThreadCs[i].start();        }        Thread.sleep(5000);        } catch (Exception e) {        // TODO: handle exception    }}  }</code></pre><p>æ‰§è¡Œå®Œï¼š<br><img src="https://upload-images.jianshu.io/upload_images/1453857-c2d2686d93ecd77d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="5.png"></p><p>ä¸¤ä¸ªéƒ½æ˜¯ç­‰å¾…ï¼Œè€Œä¸”è¿˜æ²¡æ‰§è¡Œå®Œï¼Œæ˜¯ä¸æ˜¯å¾ˆå¥‡æ€ªã€‚ã€‚ã€‚äº§ç”Ÿè¿™ç§æƒ…å†µæ˜¯å› ä¸ºå”¤é†’çš„æ—©äº†ç‚¹ï¼Œ ç”Ÿäº§è€…1å”¤é†’äº†ç”Ÿäº§è€…2ï¼Œç„¶è€Œç”Ÿäº§è€…2å‘ç°äº§å“å¹¶æœªè¢«æ¶ˆè´¹ï¼Œæ‰€ä»¥ç”Ÿäº§è€…2ä¹Ÿæ˜¯waitçŠ¶æ€ã€‚å¦å¤–ï¼Œè¿˜æœ‰ç§åŸå› ï¼Œå°±æ˜¯è¿ç»­å”¤é†’åŒç±»ã€‚è§£å†³è¿™ç§é—®é¢˜ï¼Œå°±éœ€è¦å°†På’ŒCä¸­çš„notifyæ”¹æˆnotifyAll()ï¼Œå°†ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¸€èµ·å”¤é†’ï¼Œå°±okäº†ã€‚</p><p>å’±æ¥ç€å˜</p><p>######ä¸€ç”Ÿäº§ä¸€æ¶ˆè´¹ï¼šæ¥æ“ä½œæ ˆ<br>è¿™ä¸ªåœºæ™¯å°±æ˜¯ç”Ÿäº§è€…å‘å †æ ˆListä¸­æ”¾æ•°æ®ï¼Œæ¶ˆè´¹è€…ä»Listä¸­å–æ•°æ®ã€‚listæœ€å¤§å®¹é‡æ˜¯1:<br>p:</p><pre><code>        package com.notrace;  //ç”Ÿäº§è€…  public class P {private MyStack stack;public P(MyStack stack) {    super();    this.stack=stack;}public void pushService() {    stack.push();}}</code></pre><p>C:</p><pre><code>        package com.notrace;  //æ¶ˆè´¹è€…public class C {private MyStack stack;public C(MyStack stack) {    super();    this.stack=stack;}public void popService() {    System.out.println(&quot;pop=&quot;+stack.pop());}  }</code></pre><p>MyStack:</p><pre><code>        package com.notrace;  import java.util.ArrayList;  import java.util.List;  public class MyStack {  private List list=new ArrayList&lt;&gt;();  synchronized public void push() {try {    if(list.size()==1) {        this.wait();    }    list.add(&quot;notrace:&quot;+Math.random());    this.notify();    System.out.println(&quot;push=&quot;+list.size());} catch (Exception e) {    // TODO: handle exception}  }      synchronized public String pop() {String value=&quot;&quot;;try {    if(list.size()==0) {        System.out.println(&quot;popæ“ä½œ&quot;+Thread.currentThread().getName());        this.wait();    }    value=&quot;&quot;+list.get(0);    list.remove(0);    this.notify();    System.out.println(&quot;pop&quot;+list.size());} catch (Exception e) {    // TODO: handle exception}return value;  }}</code></pre><p>ThreadP:</p><pre><code>        package com.notrace;  public class ThreadP extends Thread{private P p;public ThreadP(P p) {    super();    this.p=p;}@Overridepublic void run() {    while(true) {        System.out.print(&quot;&quot;);        p.pushService();//            p.setValue();    }}}</code></pre><p>ThreadC:</p><pre><code>        package com.notrace;public class ThreadC extends Thread{private C c;public ThreadC(C c) {    super();    this.c=c;}@Overridepublic void run() {    while(true) {        System.out.print(&quot;&quot;);        c.popService();  //            c.getValue();    }}  }</code></pre><p>Run:</p><pre><code>package com.notrace;</code></pre><p>public class Run {<br>    public static void main(String []args) {</p><pre><code>    MyStack stack=new MyStack();    P p=new P(stack);    C c=new C(stack);    ThreadP threadP=new ThreadP(p);    ThreadC threadC=new ThreadC(c);    threadP.start();    threadC.start();}}</code></pre><p>æ‰§è¡Œç»“æœï¼š<br><img src="https://upload-images.jianshu.io/upload_images/1453857-eb44c5bbfbef7611.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="6.png"></p><p>ç¨‹åºçš„ç»“æœæ˜¯sizeä¸ä¼šå¤§äº1|ã€‚</p><p>###ä¸€ç”Ÿäº§å¤šæ¶ˆè´¹ï¼šæ¥æ“ä½œæ ˆ<br>ä»£ç è¿˜æ˜¯ä¸Šé¢çš„é‚£äº›ï¼Œæˆ‘ä»¬æ”¹ä¸€ä¸‹Runï¼š</p><pre><code>        package com.notrace;public class Run {public static void main(String []args) {    MyStack stack=new MyStack();    P p=new P(stack);    C c1=new C(stack);    C c2=new C(stack);    C c3=new C(stack);    C c4=new C(stack);    C c5=new C(stack);    ThreadP threadP=new ThreadP(p);    ThreadC threadC1=new ThreadC(c1);    ThreadC threadC2=new ThreadC(c2);    ThreadC threadC3=new ThreadC(c3);    ThreadC threadC4=new ThreadC(c4);    ThreadC threadC5=new ThreadC(c5);    threadP.start();    threadC1.start();    threadC2.start();    threadC3.start();    threadC4.start();    threadC5.start();  }  }</code></pre><p>æ‰§è¡Œç»“æœï¼š<img src="https://upload-images.jianshu.io/upload_images/1453857-e4a1b50023c36141.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="7.png"></p><p>å‡æ­»çŠ¶æ€äº†ï¼Œå¤šæ¬¡æ‰§è¡Œã€‚è¿˜å¯èƒ½ä¼šå‡ºç°indexoutofbounceï¼Œè¿™æ˜¯å› ä¸ºæ¡ä»¶æ”¹å˜æ—¶å¹¶æ²¡æœ‰å¾—åˆ°åŠæ—¶çš„å“åº”ï¼Œå¼•èµ·äº†list.remove(0)æŠ¥é”™ï¼Œè§£å†³åŠæ³•æ˜¯å°†MyStackä¸­çš„if()åˆ¤æ–­æ”¹ä¸ºwhile()ã€‚å¤šæ¶ˆè´¹ä¸€ç”Ÿäº§ï¼Œå¤šæ¶ˆè´¹å¤šç”Ÿäº§ï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚æ”¹ä¸€ä¸‹runé‡Œé¢çš„ä»£ç å°±è¡Œäº†</p><p>å¥½äº†ï¼ŒåŸºæœ¬å®Œäº‹ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;link href=&quot;http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css&quot; rel=&quot;stylesheet&quot;&gt;  &lt;/p&gt;
&lt;script src=&quot;http://cdn.bootc
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ç”¨androidstudioç¼–å†™ç¬¬ä¸€ä¸ªxposedæ¨¡å—</title>
    <link href="https://messnoTrace.github.io/2019/04/05/%E7%94%A8androidstudio%E7%BC%96%E5%86%99%E7%AC%AC%E4%B8%80%E4%B8%AAxposed%E6%A8%A1%E5%9D%97/"/>
    <id>https://messnoTrace.github.io/2019/04/05/ç”¨androidstudioç¼–å†™ç¬¬ä¸€ä¸ªxposedæ¨¡å—/</id>
    <published>2019-04-05T02:36:55.000Z</published>
    <updated>2019-04-05T03:34:54.262Z</updated>
    
    <content type="html"><![CDATA[<p><link href="http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css" rel="stylesheet">  </p><p><script src="http://cdn.bootcss.com/highlight.js/8.0/highlight.min.js"></script>  </p><p><script>hljs.initHighlightingOnLoad();</script><br>å‰æï¼šä½ çš„æ‰‹æœºè£…äº†xposedinstaller ï¼Œå·²ç»è·å–rootæƒé™ï¼Œå¦åˆ™ä»¥ä¸‹å†…å®¹ä¸ç”¨çœ‹äº†ã€‚<br>å‚è€ƒé“¾æ¥:<a href="https://blog.csdn.net/mrglaucusss/article/details/50963542" target="_blank" rel="external">https://blog.csdn.net/mrglaucusss/article/details/50963542</a></p><p>####é…ç½®å‡†å¤‡å·¥ä½œ<br>æˆ‘çš„asç‰ˆæœ¬æ˜¯3.1çš„ã€‚æ‰€ä»¥åŸºäºæ­¤ç‰ˆæœ¬åšæ“ä½œ</p><ul><li>æ–°å»ºä¸€ä¸ªå·¥ç¨‹åŒ…åéšä¾¿å–ã€‚æˆ‘å–äº†com.notrace</li><li><p>MainActivityä»£ç ç®€å•å¦‚ä¸‹:</p><pre><code>          package com.notrace;    import android.support.v7.app.AppCompatActivity;  import android.os.Bundle;  import android.view.View;  import android.widget.Toast;  public class MainActivity extends AppCompatActivity {  @Override    protected void onCreate(Bundle savedInstanceState) {      super.onCreate(savedInstanceState);      setContentView(R.layout.activity_main);      findViewById(R.id.buttonPanel).setOnClickListener(new View.OnClickListener() {          @Override          public void onClick(View v) {          Toast.makeText(MainActivity.this,hook(),Toast.LENGTH_SHORT).show();          }      });  }  public String hook(){  return &quot;æœªè¢«åŠ«æŒ&quot;;  }}</code></pre></li></ul><p>å¾ˆç®€å•ï¼Œä¸€ä¸ªbuttonç‚¹å‡»å¼¹å‡ºtoastï¼Œæ˜¾ç¤ºhookå‡½æ•°è¿”å›å€¼,æˆ‘çš„ç›®æ ‡å°±æ˜¯ä¿®æ”¹è¿™ä¸ªhookçš„è¿”å›å€¼</p><ul><li><p>ä¿®æ”¹æ¸…å•æ–‡ä»¶ï¼Œåœ¨applicationèŠ‚ç‚¹ä¸‹æ·»åŠ </p><pre><code>              &lt;meta-data    android:name=&quot;xposedmodule&quot;    android:value=&quot;true&quot; /&gt;&lt;meta-data    android:name=&quot;xposeddescription&quot;    android:value=&quot;ä½ çŒœçŒœ&quot; /&gt;&lt;meta-data    android:name=&quot;xposedminversion&quot;    android:value=&quot;54&quot; /&gt;</code></pre></li></ul><p>ç¬¬ä¸€ä¸ªè¡¨ç¤ºæ˜¯å¦æ˜¯xposedæ¨¡å—<br>ç¬¬äºŒä¸ªæ˜¯æè¿°ï¼Œéšä¾¿ä½ å†™<br>ç¬¬ä¸‰ä¸ªæ˜¯æœ€ä½çš„apiç‰ˆæœ¬æ”¯æŒ</p><ul><li><p>ä¿®æ”¹app/gradle</p><pre><code>      repositories {    jcenter()}dependencies {  compileOnly &apos;de.robv.android.xposed:api:82&apos;  compileOnly &apos;de.robv.android.xposed:api:82:sources&apos;  implementation &apos;com.android.support:appcompat-v7:27.1.1&apos;  implementation &apos;com.android.support.constraint:constraint-layout:1.1.0&apos;  testImplementation &apos;junit:junit:4.12&apos;  androidTestImplementation &apos;com.android.support.test:runner:1.0.2&apos;  androidTestImplementation &apos;com.android.support.test.espresso:espresso-core:3.0.2&apos;}</code></pre></li></ul><p>æ³¨æ„ï¼Œä¸Šé¢ä¸¤ä¸ªä¸€å®šè¦ä¿®æ”¹ä¸ºcompileOnly å¦‚æœä½ æ˜¯ä½ç‰ˆæœ¬çš„aså¯ä»¥æ”¹æˆprovided </p><p>#####ä»£ç </p><ul><li>æ–°å»ºHookTest ç±»ï¼š</li></ul><pre><code>          package com.notrace;        import de.robv.android.xposed.IXposedHookLoadPackage;        import de.robv.android.xposed.XC_MethodHook;        import de.robv.android.xposed.XposedBridge;      import de.robv.android.xposed.XposedHelpers;      import de.robv.android.xposed.callbacks.XC_LoadPackage;      public class HookTest implements IXposedHookLoadPackage {          @Override          public void handleLoadPackage(XC_LoadPackage.LoadPackageParam loadPackageParam)           throws Throwable {    if(loadPackageParam.packageName.equals(&quot;com.notrace&quot;)){        XposedBridge.log(&quot;NOTRACE&quot;+loadPackageParam.packageName);        Class clazz=loadPackageParam.classLoader.loadClass(&quot;com.notrace.MainActivity&quot;);        XposedHelpers.findAndHookMethod(clazz, &quot;hook&quot;, new XC_MethodHook() {            @Override            protected void beforeHookedMethod(MethodHookParam param) throws Throwable {                super.beforeHookedMethod(param);            }            @Override            protected void afterHookedMethod(MethodHookParam param) throws Throwable {                param.setResult(&quot;ä½ å·²ç»è¢«åŠ«æŒäº†&quot;);            }        });    }}  }</code></pre><ul><li>æ·»åŠ xposedå…¥å£ï¼Œæ–°å»ºassetsï¼š<img src="https://upload-images.jianshu.io/upload_images/1453857-7f9d3d644e31ea0b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å¾®ä¿¡æˆªå›¾_20180511182235.png"></li></ul><p>xposed_initå†…å®¹å¦‚ä¸‹ï¼š</p><pre><code>com.notrace.HookTest</code></pre><ul><li>è‡³æ­¤ç»“æŸï¼Œç„¶åå¦‚æœä½ æ²¡æœ‰ç¦ç”¨instant run é‚£ä¹ˆä½ å°±å¾—æ‰“ä¸€ä¸ªå¸¦ç­¾åçš„å®‰è£…åŒ…ï¼Œç„¶åå®‰è£…åˆ°æ‰‹æœºä¸Šï¼Œç„¶åå†xposed installeræ¨¡å—ä¸­å‹¾é€‰ä½ ç¼–å†™çš„moduleï¼Œç„¶åæ‰‹æœºé‡å¯ç”Ÿæ•ˆã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;link href=&quot;http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css&quot; rel=&quot;stylesheet&quot;&gt;  &lt;/p&gt;
&lt;p&gt;&lt;script src=&quot;http://cdn.bo
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Androidå¦‚ä½•åœ¨å­moduleä¸­å–è·å–ä¸»moduleä¸­é€šè¿‡ç½‘ç»œæ¥å£è¯·æ±‚è¿”å›çš„æ•°æ®ï¼Ÿ</title>
    <link href="https://messnoTrace.github.io/2019/04/05/Android%E5%A6%82%E4%BD%95%E5%9C%A8%E5%AD%90module%E4%B8%AD%E5%8F%96%E8%8E%B7%E5%8F%96%E4%B8%BBmodule%E4%B8%AD%E9%80%9A%E8%BF%87%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E8%AF%B7%E6%B1%82%E8%BF%94%E5%9B%9E%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%9F/"/>
    <id>https://messnoTrace.github.io/2019/04/05/Androidå¦‚ä½•åœ¨å­moduleä¸­å–è·å–ä¸»moduleä¸­é€šè¿‡ç½‘ç»œæ¥å£è¯·æ±‚è¿”å›çš„æ•°æ®ï¼Ÿ/</id>
    <published>2019-04-05T02:35:18.000Z</published>
    <updated>2019-04-05T03:47:26.075Z</updated>
    
    <content type="html"><![CDATA[<p><link href="http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css" rel="stylesheet">  </p><p><script src="http://cdn.bootcss.com/highlight.js/8.0/highlight.min.js"></script>  </p><p><script>hljs.initHighlightingOnLoad();</script><br>å¦‚é¢˜ï¼šä»Šå¤©é‡åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œåœ¨å­moduleä¸­è·å–ä¸»moduleä¸­é€šè¿‡ç½‘ç»œæ¥å£å¼‚æ­¥è¿”å›çš„æ•°æ®ï¼Ÿå—¯ã€‚ã€‚ç»•äº†ä¸€ä¸‹åˆæŠŠè‡ªå·±ç»•è¿›å»äº†ï¼Œç®€å•æ¥è¯´ï¼Œå°±ä¸¤ä¸ªå›è°ƒå®Œäº‹ã€‚ä¸€ä¸ªrequestï¼Œä¸€ä¸ªresponseã€‚ä½†æ˜¯èƒ¡æ€ä¹±æƒ³äº†ä¸€ä¸‹åˆï¼Œå¾ˆæ˜¯å°´å°¬ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œå’±ç›´æ¥ä¸Šä»£ç ã€‚</p><p>###é¦–å…ˆä¸€ä¸ªrequestæ¥å£ï¼š<br>            public interface IRequest {<br>    public void request(IResponse response);<br>      }</p><p>###ç„¶åä¸€ä¸ªresponseæ¥å£</p><pre><code>        public interface IResponse {void response(String result);  }</code></pre><p>###ä¸€ä¸ªé€šä¿¡ç®¡ç†<br>            public class BridgeManager {<br>    private IRequest request;</p><pre><code>public void registerCallback(IRequest request) {    this.request = request;}public IRequest getRequest() {    return request;}public void setRequest(IRequest request) {    this.request = request;}}</code></pre><p>###ä¸ºäº†æ–¹ä¾¿æ‰©å±•ï¼Œæˆ‘ä»¬å†æ¥ä¸€ä¸ªé€šä¿¡ç®¡ç†çš„listçš„ç®¡ç†å®¹å™¨<br>            public class BrigeListManager {<br>    private static class SingletonHolder {</p><pre><code>    private static final BrigeListManager sInstance = new BrigeListManager();}public static BrigeListManager getInstance() {    return SingletonHolder.sInstance;}private BridgeManager bridgeManager;public BridgeManager getBridgeManager() {    return bridgeManager;}public void setBridgeManager(BridgeManager bridgeManager) {    this.bridgeManager = bridgeManager;} }</code></pre><h3 id="æˆ‘ä»¬å†æ¥å†™ä¸€ä¸ªä¸»å·¥ç¨‹æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚çš„ä¸œä¸œ"><a href="#æˆ‘ä»¬å†æ¥å†™ä¸€ä¸ªä¸»å·¥ç¨‹æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚çš„ä¸œä¸œ" class="headerlink" title="æˆ‘ä»¬å†æ¥å†™ä¸€ä¸ªä¸»å·¥ç¨‹æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚çš„ä¸œä¸œ"></a>æˆ‘ä»¬å†æ¥å†™ä¸€ä¸ªä¸»å·¥ç¨‹æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚çš„ä¸œä¸œ</h3><pre><code>      public class MainModuleImpl extends BridgeManager{public MainModuleImpl(){    registerCallback(new IRequest() {        @Override        public void request(IResponse response) {            try {                Thread.sleep(3000);                System.out.print(&quot;è€—æ—¶ä»»åŠ¡æ‰§è¡Œå®Œæ¯•&quot;);                response.response(&quot;ç»™å­moduleè¿”å›ç»“æœ&quot;);            }catch (Exception e){            }        }    });}   }</code></pre><h3 id="ç„¶åéšä¾¿åœ¨å†™ä¸€ä¸ªä¸»å·¥ç¨‹ä¸­åˆå§‹åŒ–çš„åœ°æ–¹-å…·ä½“æƒ…å†µå…·ä½“è€ƒå¯Ÿï¼Œæˆ‘åªæ¨¡æ‹Ÿä¸€ä¸‹ä¸‹"><a href="#ç„¶åéšä¾¿åœ¨å†™ä¸€ä¸ªä¸»å·¥ç¨‹ä¸­åˆå§‹åŒ–çš„åœ°æ–¹-å…·ä½“æƒ…å†µå…·ä½“è€ƒå¯Ÿï¼Œæˆ‘åªæ¨¡æ‹Ÿä¸€ä¸‹ä¸‹" class="headerlink" title="ç„¶åéšä¾¿åœ¨å†™ä¸€ä¸ªä¸»å·¥ç¨‹ä¸­åˆå§‹åŒ–çš„åœ°æ–¹,å…·ä½“æƒ…å†µå…·ä½“è€ƒå¯Ÿï¼Œæˆ‘åªæ¨¡æ‹Ÿä¸€ä¸‹ä¸‹"></a>ç„¶åéšä¾¿åœ¨å†™ä¸€ä¸ªä¸»å·¥ç¨‹ä¸­åˆå§‹åŒ–çš„åœ°æ–¹,å…·ä½“æƒ…å†µå…·ä½“è€ƒå¯Ÿï¼Œæˆ‘åªæ¨¡æ‹Ÿä¸€ä¸‹ä¸‹</h3><pre><code>        public class MainModule {MainModule(){    BrigeListManager.getInstance().setBridgeManager(new MainModuleImpl());} }</code></pre><h3 id="å®Œäº‹äº†ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸‹å­moduleä¸­å¦‚ä½•è·å–"><a href="#å®Œäº‹äº†ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸‹å­moduleä¸­å¦‚ä½•è·å–" class="headerlink" title="å®Œäº‹äº†ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸‹å­moduleä¸­å¦‚ä½•è·å–"></a>å®Œäº‹äº†ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸‹å­moduleä¸­å¦‚ä½•è·å–</h3><pre><code>          public class Test {public static void main(String args[]) {    MainModule mainModule=new MainModule();    IResponse response = new IResponse() {        @Override        public void response(String result) {            System.out.print(result);        }    };    BrigeListManager.getInstance().getBridgeManager().getRequest().request(response);}   }</code></pre><h6 id="end"><a href="#end" class="headerlink" title="end"></a>end</h6><p>   <img src="https://upload-images.jianshu.io/upload_images/1453857-b084f81966313e54.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WX20181129-212144@2x.png"></p><p>å—¯ï¼Œï¼Œï¼Œç¾æ»‹æ»‹å§ï¼Œè™½è¯´ä»£ç ä¸éš¾ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå´è®©æˆ‘æƒ³çš„å¾ˆæ˜¯éš¾å—ï¼Œæ¼ç«ï¼Œå¯èƒ½å¹´çºªå¤§äº†ï¼ŒğŸ˜”</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;link href=&quot;http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css&quot; rel=&quot;stylesheet&quot;&gt;  &lt;/p&gt;
&lt;p&gt;&lt;script src=&quot;http://cdn.bo
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>èµ„æºç´¢å¼•</title>
    <link href="https://messnoTrace.github.io/2019/04/05/%E8%B5%84%E6%BA%90%E7%B4%A2%E5%BC%95/"/>
    <id>https://messnoTrace.github.io/2019/04/05/èµ„æºç´¢å¼•/</id>
    <published>2019-04-05T02:24:05.000Z</published>
    <updated>2019-04-05T02:46:50.738Z</updated>
    
    <content type="html"><![CDATA[<h3 id="hexo-ä½¿ç”¨æ•™ç¨‹"><a href="#hexo-ä½¿ç”¨æ•™ç¨‹" class="headerlink" title="hexo ä½¿ç”¨æ•™ç¨‹"></a>hexo ä½¿ç”¨æ•™ç¨‹</h3><p><a href="[http://fangzh.top/2018/2018090715/](http://fangzh.top/2018/2018090715/">hexoæ•™ç¨‹:åŸºæœ¬é…ç½®+æ›´æ¢ä¸»é¢˜+å¤šç»ˆç«¯å·¥ä½œ+coding pageéƒ¨ç½²åˆ†æµ(2)</a><br>)<br> <a href="https://www.cnblogs.com/jackyroc/p/7681938.html" target="_blank" rel="external">æˆ‘æ˜¯å¦‚ä½•åˆ©ç”¨Github Pagesæ­å»ºèµ·æˆ‘çš„åšå®¢ï¼Œç»†æ•°ä¸€è·¯çš„å‘</a><br><a href="https://github.com/aircloud/hexo-theme-aircloud" target="_blank" rel="external">hexo-theme-aircloudä¸»é¢˜</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;hexo-ä½¿ç”¨æ•™ç¨‹&quot;&gt;&lt;a href=&quot;#hexo-ä½¿ç”¨æ•™ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;hexo ä½¿ç”¨æ•™ç¨‹&quot;&gt;&lt;/a&gt;hexo ä½¿ç”¨æ•™ç¨‹&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;[http://fangzh.top/2018/201809071
      
    
    </summary>
    
    
  </entry>
  
</feed>
